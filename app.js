!function(e){function t(t){for(var n,i,c=t[0],s=t[1],l=t[2],f=0,h=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);h.length;)h.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var s=r[c];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([818,1]),r()}({123:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(46),a=r.n(n),o=r(26),i=new Set(["outer-shadow","cast-shadow"]),c=new Set(["inner-shadow","score"]),s=new Set(["fill-color","fill-lineargradient","fill-radialgradient"]),l={fx:function(e,t,r,n){var l,f,d,p,_,m,g=(e=e||[]).filter((function(e){return!!e&&i.has(e.effect)})),y=e.filter((function(e){return!!e&&c.has(e.effect)})),v=e.filter((function(e){return!!e&&s.has(e.effect)}));d=p=_=m=g.reduce((function(e,t){return Math.max(e,t.blur||0)}),0);var b={w:n.w+d+p,h:n.h+m+_};l=o.a.context(b),g.forEach((function(e){switch(e.effect){case"cast-shadow":l.clearRect(0,0,b.w,b.h),l.drawImage(r.canvas||r,d,m),function(e,t,r){for(var n=o.a.context({w:t,h:r}),a=1;a<Math.max(t,r);a++)n.drawImage(e.canvas,a,a);n.globalCompositeOperation="source-in",n.fillStyle="#000",n.fillRect(0,0,t,r);var i=n.createLinearGradient(0,0,t,r);i.addColorStop(0,"rgba(0, 0, 0, .2)"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),n.fillStyle=i,n.fillRect(0,0,t,r),e.clearRect(0,0,t,r),e.drawImage(n.canvas,0,0)}(l,b.w,b.h),t.drawImage(l.canvas,d,m,n.w,n.h,0,0,n.w,n.h);break;case"outer-shadow":var i=a()(e.color||"#000"),c=i.getAlpha();i.setAlpha(1),u()?(l.save(),l.clearRect(0,0,b.w,b.h),l.filter="blur(".concat(e.blur||0,"px)"),l.drawImage(r.canvas||r,d,m),l.globalCompositeOperation="source-atop",l.fillStyle=i.toRgbString(),l.fillRect(0,0,b.w,b.h),l.restore(),t.save(),t.translate(e.translateX||0,e.translateY||0),t.globalAlpha=c,t.drawImage(l.canvas,d,m,n.w,n.h,0,0,n.w,n.h),t.restore()):(t.save(),t.globalAlpha=c,t.shadowOffsetX=b.w,t.shadowOffsetY=0,t.shadowColor=i.toRgbString(),t.shadowBlur=h(e.blur||0),t.drawImage(r.canvas||r,(e.translateX||0)-b.w,e.translateY||0),t.restore())}})),f=o.a.context(n),(l=o.a.context(n)).drawImage(r.canvas||r,0,0),l.globalCompositeOperation="source-atop";var w=1;v.forEach((function(e){switch(w="opacity"in e?e.opacity:1,l.save(),e.effect){case"fill-color":l.fillStyle=e.color;break;case"fill-lineargradient":var t=l.createLinearGradient(e.fromX,e.fromY,e.toX,e.toY);e.colors.forEach((function(e){var r=e.offset,n=e.color;return t.addColorStop(r,n)})),l.fillStyle=t;break;case"fill-radialgradient":var r=l.createRadialGradient(e.centerX,e.centerY,0,e.centerX,e.centerY,e.radius);e.colors.forEach((function(e){var t=e.offset,n=e.color;return r.addColorStop(t,n)})),l.fillStyle=r}l.fillRect(0,0,n.w,n.h),l.restore()})),f.save(),f.globalAlpha=w,f.drawImage(l.canvas,0,0),f.restore(),d=m=p=_=0,y.forEach((function(e){d=Math.max(d,(e.blur||0)+Math.max(0,e.translateX||0)),m=Math.max(m,(e.blur||0)+Math.max(0,e.translateY||0)),p=Math.max(p,(e.blur||0)+Math.max(0,-(e.translateX||0))),_=Math.max(_,(e.blur||0)+Math.max(0,-(e.translateY||0)))})),b={w:n.w+d+p,h:n.h+m+_},l=o.a.context(b),y.forEach((function(e){switch(e.effect){case"inner-shadow":l.save(),l.clearRect(0,0,b.w,b.h),u()?(l.filter="blur(".concat(e.blur||0,"px)"),l.drawImage(f.canvas,d+(e.translateX||0),m+(e.translateY||0))):(l.shadowOffsetX=b.w,l.shadowOffsetY=0,l.shadowColor="#000",l.shadowBlur=h(e.blur||0),l.drawImage(f.canvas,d+(e.translateX||0)-b.w,m+(e.translateY||0))),l.globalCompositeOperation="source-out",l.fillStyle=e.color,l.fillRect(0,0,b.w,b.h),l.restore(),f.save(),f.globalCompositeOperation="source-atop",f.drawImage(l.canvas,-d,-m),f.restore()}})),t.drawImage(f.canvas,0,0)}};function u(){return u.hasOwnProperty("cached")||(u.cached="none"==document.createElement("canvas").getContext("2d").filter),u.cached}var f=[{re:/chrome/i,mult:2.7},{re:/safari/i,mult:1.8},{re:/firefox/i,mult:1.7},{re:/./i,mult:1.7}].find((function(e){return e.re.test(navigator.userAgent)})).mult;function h(e){return e*f}},26:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(123),a={context:function(e){var t=document.createElement("canvas");return t.width=e.w,t.height=e.h,t.style.setProperty("image-rendering","optimizeQuality",null),t.getContext("2d")},drawCenterInside:function(e,t,r,n){if(n.w/n.h>r.w/r.h){var o=n.h*r.w/n.w;a.drawImageScaled(e,t,n.x,n.y,n.w,n.h,r.x,r.y+(r.h-o)/2,r.w,o)}else{var i=n.w*r.h/n.h;a.drawImageScaled(e,t,n.x,n.y,n.w,n.h,r.x+(r.w-i)/2,r.y,i,r.h)}},drawCenterCrop:function(e,t,r,n){if(n.w/n.h>r.w/r.h){var o=n.h*r.w/r.h;a.drawImageScaled(e,t,n.x+(n.w-o)/2,n.y,o,n.h,r.x,r.y,r.w,r.h)}else{var i=n.w*r.h/r.w;a.drawImageScaled(e,t,n.x,n.y+(n.h-i)/2,n.w,i,r.x,r.y,r.w,r.h)}},drawImageScaled:function(e,t,r,n,o,i,c,s,l,u){if(l<=0||u<=0||o<=0||i<=0)console.error("Width/height must be at least 0");else{for(t=t.canvas||t;l<o/2||u<i/2;){var f=Math.ceil(Math.max(l,o/2)),h=Math.ceil(Math.max(u,i/2)),d=a.context({w:f,h:h});d.clearRect(0,0,f,h),d.drawImage(t,r,n,o,i,0,0,f,h),t=d.canvas,r=n=0,o=f,i=h}e.drawImage(t,r,n,o,i,c,s,l,u)}}};a.drawLayers=function(e,t,r){function o(e,r){var i=a.context(t);if(r.children?function(e,r){var n=[e];r.children.filter((function(e){return!!e})).forEach((function(e){if(o(n[n.length-1],e),e.mask){var r=a.context(t);n.push(r)}}));for(;n.length>1;){var i=n[n.length-2],c=n[n.length-1];i.save(),i.globalCompositeOperation="source-atop",i.drawImage(c.canvas,0,0),i.restore(),n.pop()}}(i,r):r.draw&&r.draw(i),r.effects){var c=a.context(t);n.a.fx(r.effects,c,i,t),i=c}e.drawImage(i.canvas,0,0)}o(e,r)}},296:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Analysis}));var _drawing__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26),Analysis={};function runWorkerJs_(js,params,callback){var URL=window.URL||window.webkitURL||window.mozURL,Worker=window.Worker;if(URL&&Worker&&hasBlobConstructor_()){var bb=new Blob([js],{type:"text/javascript"}),worker=new Worker(URL.createObjectURL(bb));return worker.onmessage=function(e){callback(e.data)},worker.postMessage(params),worker}return function(){var __DUMMY_OBJECT__={},postMessage=function(e){callback(e)};eval("var self=__DUMMY_OBJECT__;\n"+js),__DUMMY_OBJECT__.onmessage({data:params})}(),{terminate:function(){}}}function hasBlobConstructor_(){try{return!!new Blob}catch(e){return!1}}Analysis.TRIM_RECT_WORKER_JS="\n    self.onmessage = function(event) {\n      var l = event.data.size.w, t = event.data.size.h, r = 0, b = 0;\n\n      var alpha;\n      for (var y = 0; y < event.data.size.h; y++) {\n        for (var x = 0; x < event.data.size.w; x++) {\n          alpha = event.data.imageData.data[\n              ((y * event.data.size.w + x) << 2) + 3];\n          if (alpha >= event.data.minAlpha) {\n            l = Math.min(x, l);\n            t = Math.min(y, t);\n            r = Math.max(x, r);\n            b = Math.max(y, b);\n          }\n        }\n      }\n\n      if (l > r) {\n        // no pixels, couldn't trim\n        postMessage({ x: 0, y: 0, w: event.data.size.w, h: event.data.size.h });\n        return;\n      }\n\n      postMessage({ x: l, y: t, w: r - l + 1, h: b - t + 1 });\n    };",Analysis.MAX_TRIM_SRC_SIZE=500,Analysis.getTrimRect=function(e,t,r){if(!e.canvas){var n=e;(e=_drawing__WEBPACK_IMPORTED_MODULE_0__.a.context(t)).drawImage(n,0,0)}var a,o=1;if(t.w>Analysis.MAX_TRIM_SRC_SIZE||t.h>Analysis.MAX_TRIM_SRC_SIZE){o=t.w>Analysis.MAX_TRIM_SRC_SIZE?Analysis.MAX_TRIM_SRC_SIZE/t.w:Analysis.MAX_TRIM_SRC_SIZE/t.h;var i={w:t.w*o,h:t.h*o},c=_drawing__WEBPACK_IMPORTED_MODULE_0__.a.context(i);c.drawImage(e.canvas,0,0,t.w,t.h,0,0,i.w,i.h),e=c,t=i}var s=new Promise((function(n,i){0==r&&n({x:0,y:0,w:t.w,h:t.h}),r=r||1,a=runWorkerJs_(Analysis.TRIM_RECT_WORKER_JS,{imageData:e.getImageData(0,0,t.w,t.h),size:t,minAlpha:r},(function(e){e.x/=o,e.y/=o,e.w/=o,e.h/=o,n(e),a=null}))}));return Object.defineProperty(s,"worker",{get:function(){return a}}),s},Analysis.getCenterOfMass=function(e,t,r){return new Promise((function(n,a){if(!e.canvas){var o=e;(e=_drawing__WEBPACK_IMPORTED_MODULE_0__.a.context(t)).drawImage(o,0,0)}0==r&&n({x:t.w/2,y:t.h/2}),r=r||1;t.w,t.h;for(var i=e.getImageData(0,0,t.w,t.h),c=0,s=0,l=0,u=0;u<t.h;u++)for(var f=0;f<t.w;f++)i.data[3+(u*t.w+f<<2)]>=r&&(c+=f,s+=u,++l);l<=0&&n({x:t.w/2,h:t.h/2}),n({x:Math.round(c/l),y:Math.round(s/l)})}))}},507:function(e,t){},509:function(e,t){},818:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"LauncherIconGenerator",(function(){return nt})),r.d(n,"AppShortcutIconGenerator",(function(){return pt})),r.d(n,"ActionBarIconGenerator",(function(){return Rt})),r.d(n,"NotificationIconGenerator",(function(){return Ft})),r.d(n,"GenericIconGenerator",(function(){return Gt})),r.d(n,"NinePatchGenerator",(function(){return vr}));var a=r(1),o=r.n(a),i={getMultBaseMdpi:function(e){switch(e){case"xxxhdpi":return 4;case"xxhdpi":return 3;case"xhdpi":return 2;case"hdpi":return 1.5;case"tvdpi":return 1.33125;case"mdpi":return 1;case"ldpi":return.75}return 1},getDpiForDensity:function(e){switch(e){case"xxxhdpi":return 640;case"xxhdpi":return 480;case"xhdpi":return 320;case"hdpi":return 240;case"tvdpi":return 213;case"mdpi":return 160;case"ldpi":return 120}return 160},mult:function(e,t){var r={};for(var n in e)r[n]=e[n]*t;return r},multRound:function(e,t){var r={};for(var n in e)r[n]=Math.round(e[n]*t);return r},sanitizeResourceName:function(e){return e.toLowerCase().replace(/[\s-\.]/g,"_").replace(/[^\w_]/g,"")},downloadFile:function(e,t){var r=o()("<a>").hide().appendTo(document.body),n=e;e instanceof Blob||(n=new Blob([e],{type:"application/octet-stream"}));var a=window.URL.createObjectURL(n);r.attr({href:a,download:t}),r.get(0).click(),setTimeout((function(){r.remove(),window.URL.revokeObjectURL(a)}),5e3)},loadImageFromUri:function(e){return new Promise((function(t,r){var n=document.createElement("img");n.onload=function(){return t(n)},n.onerror=function(){return r()},n.src=e}))},debugCtx:function(e){i.debugCtx.$lastEl&&i.debugCtx.$lastEl.remove(),i.debugCtx.$lastEl=o()("<img>").css({position:"fixed",top:0,right:0,zIndex:100,backgroundColor:"rgba(255, 0, 0, 0.5)",pointerEvents:"none"}).attr("src",e.canvas.toDataURL()).appendTo(document.body)},debounce:function(e,t){var r;return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];r&&clearTimeout(r),r=setTimeout((function(){t.apply(void 0,a),r=null}),e)}}};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u={bindFormToDocumentHash:function(e){var t=this;if(this.boundForm_)console.error("already bound to a form");else{this.boundForm_=e,e.onChange(i.debounce(100,(function(){t.currentHash_=h(e.getValuesSerialized()),window.history.replaceState({},"","#"+t.currentHash_)})));var r=function(){var r=h(f((document.location.href.match(/#.*/)||[""])[0]));r!=t.currentHash_&&(e.setValuesSerialized(f(r)),t.currentHash_=r)};o()(window).on("hashchange",r),r()}}};function f(e){var t={};return(e=e.replace(/^[?#]/,"")).split("&").forEach((function(e){var r=s(e.split("=",2),2),n=r[0],a=r[1];n=decodeURIComponent(n||""),a=decodeURIComponent(a||"");var o=n.split("."),i=t;o.slice(0,-1).forEach((function(e){i[e]=i[e]||{},i=i[e]}));var c=o[o.length-1];c in i?Array.isArray(i[c])?i[c].push(a):i[c]=[i[c],a]:i[c]=a})),t}function h(e,t){var r=[],n=function(e){return encodeURIComponent((t?t+".":"")+e)},a=function(e,t){!1===t&&(t=0),!0===t&&(t=1),r.push(n(e)+"="+encodeURIComponent(t.toString()))},o=function(t){var o=e[t];if(null==o)return"continue";Array.isArray(o)?o.forEach((function(e){return a(t,e)})):"object"==c(o)?r.push(h(o,n(t))):a(t,o)};for(var i in e)o(i);return r.join("&")}var d=r(297),p=r.n(d);function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(e,t){return new g(e,t)},g=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fileSpecs_=[],this.el_=t,this.el_.click((function(){return n.generateAndDownloadZipFile_()})),this.updateUI_()}var t,r,n;return t=e,(r=[{key:"setZipFilename",value:function(e){this.zipFilename_=e}},{key:"clear",value:function(){this.fileSpecs_=[],this.updateUI_()}},{key:"add",value:function(e){this.fileSpecs_.push(e),this.updateUI_()}},{key:"updateUI_",value:function(){this.fileSpecs_.length&&!this.isGenerating_?this.el_.removeAttr("disabled"):this.el_.attr("disabled","disabled")}},{key:"generateAndDownloadZipFile_",value:function(){var e=this,t=this.zipFilename_||"output.zip";if(this.fileSpecs_.length){this.isGenerating_=!0,this.updateUI_();var r=new p.a;this.fileSpecs_.forEach((function(e){e.canvas?r.file(e.name,e.canvas.toDataURL().replace(/.*?;base64,/,""),{base64:!0}):r.file(e.name,e.textData)})),r.generateAsync({type:"blob"}).then((function(r){i.downloadFile(r,t),e.isGenerating_=!1,e.updateUI_()})).catch((function(t){console.error(t),e.isGenerating_=!1,e.updateUI_()}))}}}])&&_(t.prototype,r),n&&_(t,n),e}();function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_=t,this.params_=r,this.params_.onChange&&this.onChange(this.params_.onChange),this.enabled_=!0}var t,r,n;return t=e,(r=[{key:"setForm_",value:function(e){var t=this;this.form_=e,this.onChange((function(e,r){t.form_.notifyChanged_(t,e,r)}))}},{key:"getLongId",value:function(){return this.form_.id_+"-"+this.id_}},{key:"getHtmlId",value:function(){return"_frm-"+this.getLongId()}},{key:"createUi",value:function(e){return e=o()(e),this.baseEl_=o()("<div>").addClass("form-field-outer").addClass(this.params_.newGroup?"is-new-group":"").append(o()("<label>").attr("for",this.getHtmlId()).text(this.params_.title).append(o()("<div>").addClass("form-field-help-text").css("display",this.params_.helpText?"":"none").html(this.params_.helpText))).append(o()("<div>").addClass("form-field-container")).appendTo(e),this.baseEl_}},{key:"getEnabled",value:function(){return this.enabled_}},{key:"setEnabled",value:function(e){this.enabled_=e,this.baseEl_&&(e?this.baseEl_.removeAttr("disabled"):this.baseEl_.attr("disabled","disabled"))}},{key:"onChange",value:function(e){this.changeListeners_=(this.changeListeners_||[]).concat([e])}},{key:"notifyChanged_",value:function(e,t){(this.changeListeners_||[]).forEach((function(r){return r(e,t)}))}}])&&y(t.prototype,r),n&&y(t,n),e}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var a=C(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return z(this,r)}}function z(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,r,n,a=R(i);function i(){return w(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"createUi",value:function(e){var t=this,r=o()(".form-field-container",k(C(i.prototype),"createUi",this).call(this,e));this.params_.buttons?this.el_=o()("<div>").attr("id",this.getHtmlId()).addClass("form-field-buttonset").appendTo(r):(this.el_=o()("<div>").addClass("form-field-select").attr("id",this.getHtmlId()).appendTo(r),this.selectEl_=o()("<select>").attr("id",this.getHtmlId()).on("input",(function(e){return t.setValueInternal_(o()(e.currentTarget).val(),!0)})).appendTo(this.el_)),this.setOptions(this.params_.options)}},{key:"setOptions",value:function(e){var t=this;this.el_&&(e=(e||[]).map((function(e){return"string"==typeof e?{id:e,title:String(e)}:e})),this.params_.buttons?(this.el_.empty(),(e||[]).forEach((function(e){o()("<input>").attr({type:"radio",name:t.getHtmlId(),id:"".concat(t.getHtmlId(),"-").concat(e.id),value:e.id}).on("change",(function(e){return t.setValueInternal_(o()(e.currentTarget).val(),!1)})).appendTo(t.el_),o()("<label>").attr("for","".concat(t.getHtmlId(),"-").concat(e.id)).attr("tabindex",0).html(e.title).appendTo(t.el_)}))):(this.selectEl_.empty(),(e||[]).forEach((function(e){return o()("<option>").attr("value",e.id).text(e.title).appendTo(t.selectEl_)}))),this.setValueInternal_(this.getValue()))}},{key:"getValue",value:function(){var e=this.value_;if(void 0===e&&void 0===(e=this.params_.defaultValue)&&this.params_.options&&this.params_.options.length){var t=this.params_.options[0];e="id"in t?t.id:String(t)}return e}},{key:"setValue",value:function(e,t){this.setValueInternal_(e,t)}},{key:"setValueInternal_",value:function(e,t){var r=this.value_;this.value_=e,t||(this.params_.buttons?this.el_.find("input").each((function(t,r){return o()(r).prop("checked",o()(r).val()==e)})):this.selectEl_.val(e)),this.notifyChanged_(e,r)}},{key:"serializeValue",value:function(){return this.getValue()}},{key:"deserializeValue",value:function(e){this.setValue(e)}}])&&x(t.prototype,r),n&&x(t,n),i}(v);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,r){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var a=E(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(o,e);var t,r,n,a=j(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r=a.call(this,e,t),t.options=[{id:"1",title:t.onText||"Yes"},{id:"0",title:t.offText||"No"}],t.defaultValue=t.defaultValue?"1":"0",t.buttons=!0,r}return t=o,(r=[{key:"getValue",value:function(){return"1"==I(E(o.prototype),"getValue",this).call(this)}},{key:"setValue",value:function(e,t){I(E(o.prototype),"setValue",this).call(this,e?"1":"0",t)}},{key:"serializeValue",value:function(){return this.getValue()?"1":"0"}},{key:"deserializeValue",value:function(e){this.setValue("1"==e)}}])&&P(t.prototype,r),n&&P(t,n),o}(O),D=r(46),A=r.n(D),L=r(2),B=r.n(L),U=r(298),N=r.n(U),$=r(299);function W(e,t,r){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t,r){return t&&q(e.prototype,t),r&&q(e,r),e}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ee(e);if(t){var a=ee(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return K(this,r)}}function K(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#9e9e9e","#607d8b","#ffffff","#000000"],re=function(e){X(r,e);var t=J(r);function r(e){var n;return H(this,r),(n=t.call(this,e)).widgetRef=B.a.createRef(),n.state={displayColorPicker:!1,color:e.color||{r:0,g:0,b:0,a:1}},n.handleClick=n.handleClick.bind(Q(n)),n.handleClose=n.handleClose.bind(Q(n)),n.handleChange=n.handleChange.bind(Q(n)),n.handleKeyDown=n.handleKeyDown.bind(Q(n)),n}return Y(r,[{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.handleClose()}},{key:"handleClick",value:function(){var e=this.widgetRef.current.getBoundingClientRect();this.setState({displayColorPicker:!this.state.displayColorPicker,widgetLeft:e.x,widgetTop:e.y-270})}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(e){this.setState({color:e.rgb}),this.props.onChange&&this.props.onChange(this.rgbaString(e.rgb))}},{key:"rgbaString",value:function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")}},{key:"render",value:function(){return B.a.createElement("div",{id:this.props.id,onKeyDown:this.handleKeyDown},B.a.createElement("button",{ref:this.widgetRef,className:"form-field-color-widget",onClick:this.handleClick},B.a.createElement("div",{className:"form-field-color-widget-swatch",style:{color:this.rgbaString(this.state.color)}})),this.state.displayColorPicker?B.a.createElement("div",{className:"form-field-color-popup-container",style:{left:this.state.widgetLeft,top:this.state.widgetTop}},B.a.createElement("div",{className:"form-field-color-popup-cover",onClick:this.handleClose}),B.a.createElement($.SketchPicker,{presetColors:te,disableAlpha:!this.props.showAlpha,color:this.state.color,onChange:this.handleChange})):null)}}]),r}(B.a.Component),ne=function(e){X(r,e);var t=J(r);function r(){return H(this,r),t.apply(this,arguments)}return Y(r,[{key:"createUi",value:function(e){var t=this,n=o()(".form-field-container",W(ee(r.prototype),"createUi",this).call(this,e));N.a.render(B.a.createElement(re,{ref:function(e){return t.pickerWidget=e},id:this.getHtmlId(),color:this.getValue().toRgb(),showAlpha:this.params_.alpha,onChange:function(e){return t.setValue(e,!0)}}),o()("<div>").appendTo(n).get(0))}},{key:"getValue",value:function(){return this.value_||A()(this.params_.defaultValue||"#000")}},{key:"setValue",value:function(e,t){var r=this.value_;this.value_=e.hasOwnProperty("_r")?e:A()(e||this.params_.defaultValue||"#000"),t||this.pickerWidget.setState({color:this.value_.toRgb()}),this.notifyChanged_(e,r)}},{key:"serializeValue",value:function(){return this.getValue().toRgbString()}},{key:"deserializeValue",value:function(e){this.setValue(e)}}]),r}(v);function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oe=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_=t.id,this.params_=t,this.fields_=t.fields,this.fields_.forEach((function(e){return e.setForm_(r)})),this.fields_.forEach((function(e){return e.createUi(t.container)}))}var t,r,n;return t=e,(r=[{key:"onChange",value:function(e){this.changeListeners_=(this.changeListeners_||[]).concat([e])}},{key:"notifyChanged_",value:function(e,t,r){this.pauseNotify_||(this.changeListeners_||[]).forEach((function(n){return n(e,t,r)}))}},{key:"getValues",value:function(){var e={};return this.fields_.forEach((function(t){return e[t.id_]=t.getValue()})),e}},{key:"getValuesSerialized",value:function(){var e={};return this.fields_.forEach((function(t){void 0!==(t.serializeValue?t.serializeValue():void 0)&&(e[t.id_]=t.serializeValue())})),e}},{key:"setValuesSerialized",value:function(e){this.pauseNotify_=!0,this.fields_.filter((function(t){return t.id_ in e&&t.deserializeValue})).forEach((function(t){return t.deserializeValue(e[t.id_])})),this.pauseNotify_=!1,this.notifyChanged_()}}])&&ae(t.prototype,r),n&&ae(t,n),e}(),ie=r(300),ce=r.n(ie);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e,t,r){return(fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_e(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_e(e);if(t){var a=_e(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(i,e);var t,r,n,a=de(i);function i(){return le(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"createUi",value:function(e){var t=this,r=o()(".form-field-container",fe(_e(i.prototype),"createUi",this).call(this,e));this.el_=o()("<input>").attr("type","text").attr("placeholder",this.params_.placeholder).addClass("form-field-text").val(this.getValue()).on("input",(function(e){var r=t.getValue(),n=o()(e.currentTarget).val();r!=n&&t.setValue(n,!0)})).appendTo(r)}},{key:"getValue",value:function(){var e=this.value_;return"string"!=typeof e&&(e=this.params_.defaultValue||""),e}},{key:"setValue",value:function(e,t){var r=this.value_;this.value_=e,t||this.el_.val(e),this.notifyChanged_(e,r)}},{key:"serializeValue",value:function(){return this.getValue()}},{key:"deserializeValue",value:function(e){this.setValue(e)}}])&&ue(t.prototype,r),n&&ue(t,n),i}(v);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t,r){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Se(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Se(e);if(t){var a=Se(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ke(this,r)}}function ke(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(i,e);var t,r,n,a=xe(i);function i(){return ye(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"createUi",value:function(e){var t=this,r=o()(".form-field-container",be(Se(i.prototype),"createUi",this).call(this,e));this.el_=o()("<div>").addClass("form-field-range").attr("id",this.getHtmlId()).appendTo(r),this.rangeEl_=o()("<input>").attr("type","range").attr("min",this.params_.min||0).attr("max",this.params_.max||100).attr("step",this.params_.step||1).on("input",(function(){return t.setValue(Number(t.rangeEl_.val())||0,!0)})).val(this.getValue()).appendTo(this.el_),(this.params_.textFn||this.params_.showText)&&(this.params_.textFn=this.params_.textFn||function(e){return e},this.textEl_=o()("<div>").addClass("form-field-range-text").text(this.params_.textFn(this.getValue())).appendTo(this.el_))}},{key:"getValue",value:function(){var e=this.value_;return"number"!=typeof e&&"number"!=typeof(e=this.params_.defaultValue)&&(e=0),e}},{key:"setValue",value:function(e,t){var r=this.value_;this.value_=e,t||this.rangeEl_.val(e),this.textEl_&&this.textEl_.text(this.params_.textFn(e)),this.notifyChanged_(e,r)}},{key:"serializeValue",value:function(){return this.getValue()}},{key:"deserializeValue",value:function(e){this.setValue(Number(e))}}])&&ve(t.prototype,r),n&&ve(t,n),i}(v),ze=["360","3d_rotation","4k","8k","ac_unit","access_alarm","access_alarms","access_time","accessibility","accessibility_new","accessible","accessible_forward","account_balance","account_balance_wallet","account_box","account_circle","account_tree","ad_units","adb","add","add_a_photo","add_alarm","add_alert","add_box","add_call","add_chart","add_circle","add_circle_outline","add_comment","add_link","add_location","add_location_alt","add_moderator","add_photo_alternate","add_road","add_shopping_cart","add_to_home_screen","add_to_photos","add_to_queue","addchart","adjust","admin_panel_settings","agriculture","airline_seat_flat","airline_seat_flat_angled","airline_seat_individual_suite","airline_seat_legroom_extra","airline_seat_legroom_normal","airline_seat_legroom_reduced","airline_seat_recline_extra","airline_seat_recline_normal","airplanemode_active","airplanemode_inactive","airplay","airport_shuttle","alarm","alarm_add","alarm_off","alarm_on","album","all_inbox","all_inclusive","all_out","alternate_email","amp_stories","analytics","android","announcement","apartment","app_blocking","app_registration","app_settings_alt","approval","apps","architecture","archive","arrow_back","arrow_back_ios","arrow_downward","arrow_drop_down","arrow_drop_down_circle","arrow_drop_up","arrow_forward","arrow_forward_ios","arrow_left","arrow_right","arrow_right_alt","arrow_upward","art_track","article","aspect_ratio","assessment","assignment","assignment_ind","assignment_late","assignment_return","assignment_returned","assignment_turned_in","assistant","assistant_direction","assistant_navigation","assistant_photo","atm","attach_email","attach_file","attach_money","attachment","attractions","audiotrack","auto_delete","autorenew","av_timer","backspace","backup","backup_table","badge","bakery_dining","ballot","bar_chart","bathtub","battery_alert","battery_charging_full","battery_full","battery_std","battery_unknown","beach_access","beenhere","biotech","block","bluetooth","bluetooth_audio","bluetooth_connected","bluetooth_disabled","bluetooth_searching","blur_circular","blur_linear","blur_off","blur_on","bolt","book","bookmark","bookmark_border","bookmarks","border_all","border_bottom","border_clear","border_color","border_horizontal","border_inner","border_left","border_outer","border_right","border_style","border_top","border_vertical","branding_watermark","breakfast_dining","brightness_1","brightness_2","brightness_3","brightness_4","brightness_5","brightness_6","brightness_7","brightness_auto","brightness_high","brightness_low","brightness_medium","broken_image","brunch_dining","brush","bubble_chart","bug_report","build","burst_mode","bus_alert","business","business_center","cached","cake","calculate","calendar_today","calendar_view_day","call","call_end","call_made","call_merge","call_missed","call_missed_outgoing","call_received","call_split","call_to_action","camera","camera_alt","camera_enhance","camera_front","camera_rear","camera_roll","campaign","cancel","cancel_presentation","cancel_schedule_send","car_rental","car_repair","card_giftcard","card_membership","card_travel","cases","casino","cast","cast_connected","category","celebration","cell_wifi","center_focus_strong","center_focus_weak","change_history","chat","chat_bubble","chat_bubble_outline","check","check_box","check_box_outline_blank","check_circle","check_circle_outline","chevron_left","chevron_right","child_care","child_friendly","chrome_reader_mode","circle_notifications","class","clear","clear_all","close","closed_caption","closed_caption_off","cloud","cloud_circle","cloud_done","cloud_download","cloud_off","cloud_queue","cloud_upload","code","collections","collections_bookmark","color_lens","colorize","comment","comment_bank","commute","compare","compare_arrows","compass_calibration","compress","computer","confirmation_number","connected_tv","construction","contact_mail","contact_phone","contact_support","contactless","contacts","content_copy","content_cut","content_paste","control_camera","control_point","control_point_duplicate","copyright","create","create_new_folder","credit_card","crop","crop_16_9","crop_3_2","crop_5_4","crop_7_5","crop_din","crop_free","crop_landscape","crop_original","crop_portrait","crop_rotate","crop_square","dangerous","dashboard","dashboard_customize","data_usage","date_range","deck","dehaze","delete","delete_forever","delete_outline","delete_sweep","delivery_dining","departure_board","description","desktop_access_disabled","desktop_mac","desktop_windows","details","developer_board","developer_mode","device_hub","device_thermostat","device_unknown","devices","devices_other","dialer_sip","dialpad","dinner_dining","directions","directions_bike","directions_boat","directions_bus","directions_car","directions_railway","directions_run","directions_subway","directions_transit","directions_walk","disc_full","dns","do_not_disturb","do_not_disturb_alt","do_not_disturb_off","do_not_disturb_on","dock","domain","domain_disabled","domain_verification","done","done_all","done_outline","donut_large","donut_small","double_arrow","drafts","drag_handle","drag_indicator","drive_eta","drive_file_move_outline","drive_file_rename_outline","drive_folder_upload","dry_cleaning","duo","dvr","dynamic_feed","eco","edit","edit_attributes","edit_location","edit_off","eject","email","emoji_emotions","emoji_events","emoji_food_beverage","emoji_nature","emoji_objects","emoji_people","emoji_symbols","emoji_transportation","engineering","enhanced_encryption","equalizer","error","error_outline","euro","euro_symbol","ev_station","event","event_available","event_busy","event_note","event_seat","exit_to_app","expand","expand_less","expand_more","explicit","explore","explore_off","exposure","exposure_neg_1","exposure_neg_2","exposure_plus_1","exposure_plus_2","exposure_zero","extension","face","fast_forward","fast_rewind","fastfood","favorite","favorite_border","featured_play_list","featured_video","feedback","festival","fiber_dvr","fiber_manual_record","fiber_new","fiber_pin","fiber_smart_record","file_copy","file_download","file_download_done","file_present","file_upload","filter","filter_1","filter_2","filter_3","filter_4","filter_5","filter_6","filter_7","filter_8","filter_9","filter_9_plus","filter_alt","filter_b_and_w","filter_center_focus","filter_drama","filter_frames","filter_hdr","filter_list","filter_list_alt","filter_none","filter_tilt_shift","filter_vintage","find_in_page","find_replace","fingerprint","fireplace","first_page","fit_screen","fitness_center","flag","flare","flash_auto","flash_off","flash_on","flight","flight_land","flight_takeoff","flip","flip_camera_android","flip_camera_ios","flip_to_back","flip_to_front","folder","folder_open","folder_shared","folder_special","font_download","format_align_center","format_align_justify","format_align_left","format_align_right","format_bold","format_clear","format_color_fill","format_color_reset","format_color_text","format_indent_decrease","format_indent_increase","format_italic","format_line_spacing","format_list_bulleted","format_list_numbered","format_list_numbered_rtl","format_paint","format_quote","format_shapes","format_size","format_strikethrough","format_textdirection_l_to_r","format_textdirection_r_to_l","format_underlined","forum","forward","forward_10","forward_30","forward_5","free_breakfast","fullscreen","fullscreen_exit","functions","g_translate","gamepad","games","gavel","gesture","get_app","gif","golf_course","gps_fixed","gps_not_fixed","gps_off","grade","gradient","grading","grain","graphic_eq","grid_off","grid_on","grid_view","group","group_add","group_work","hail","hardware","hd","hdr_off","hdr_on","hdr_strong","hdr_weak","headset","headset_mic","headset_off","healing","hearing","height","help","help_outline","high_quality","highlight","highlight_alt","highlight_off","history","history_edu","home","home_filled","home_work","horizontal_split","hot_tub","hotel","hourglass_bottom","hourglass_empty","hourglass_full","hourglass_top","house","how_to_reg","how_to_vote","http","https","icecream","image","image_aspect_ratio","image_search","imagesearch_roller","import_contacts","import_export","important_devices","inbox","indeterminate_check_box","info","info_outline","input","insert_chart","insert_chart_outlined","insert_comment","insert_drive_file","insert_emoticon","insert_invitation","insert_link","insert_photo","integration_instructions","inventory","invert_colors","invert_colors_off","iso","keyboard","keyboard_arrow_down","keyboard_arrow_left","keyboard_arrow_right","keyboard_arrow_up","keyboard_backspace","keyboard_capslock","keyboard_hide","keyboard_return","keyboard_tab","keyboard_voice","king_bed","kitchen","label","label_important","label_important_outline","label_off","label_outline","landscape","language","laptop","laptop_chromebook","laptop_mac","laptop_windows","last_page","launch","layers","layers_clear","leak_add","leak_remove","lens","library_add","library_add_check","library_books","library_music","lightbulb","lightbulb_outline","line_style","line_weight","linear_scale","link","link_off","linked_camera","liquor","list","list_alt","live_help","live_tv","local_activity","local_airport","local_atm","local_bar","local_cafe","local_car_wash","local_convenience_store","local_dining","local_drink","local_fire_department","local_florist","local_gas_station","local_grocery_store","local_hospital","local_hotel","local_laundry_service","local_library","local_mall","local_movies","local_offer","local_parking","local_pharmacy","local_phone","local_pizza","local_play","local_police","local_post_office","local_printshop","local_see","local_shipping","local_taxi","location_city","location_disabled","location_off","location_on","location_searching","lock","lock_open","lock_outline","login","logout","looks","looks_3","looks_4","looks_5","looks_6","looks_one","looks_two","loop","loupe","low_priority","loyalty","lunch_dining","mail","mail_outline","map","maps_ugc","margin","mark_as_unread","markunread","markunread_mailbox","maximize","meeting_room","memory","menu","menu_book","menu_open","merge_type","message","mic","mic_none","mic_off","military_tech","minimize","missed_video_call","mms","mobile_friendly","mobile_off","mobile_screen_share","mode_comment","mode_edit","monetization_on","money","money_off","monochrome_photos","mood","mood_bad","more","more_horiz","more_time","more_vert","motorcycle","mouse","move_to_inbox","movie","movie_creation","movie_filter","mp","multiline_chart","museum","music_note","music_off","music_video","my_location","nat","nature","nature_people","navigate_before","navigate_next","navigation","near_me","network_cell","network_check","network_locked","network_wifi","new_releases","next_week","nfc","nightlife","nights_stay","no_encryption","no_meeting_room","no_sim","not_interested","not_listed_location","note","note_add","notes","notification_important","notifications","notifications_active","notifications_none","notifications_off","notifications_paused","offline_pin","offline_share","ondemand_video","opacity","open_in_browser","open_in_new","open_with","outdoor_grill","outlined_flag","padding","pages","pageview","palette","pan_tool","panorama","panorama_fish_eye","panorama_horizontal","panorama_photosphere","panorama_photosphere_select","panorama_vertical","panorama_wide_angle","park","party_mode","pause","pause_circle_filled","pause_circle_outline","pause_presentation","payment","payments","people","people_alt","people_outline","perm_camera_mic","perm_contact_calendar","perm_data_setting","perm_device_information","perm_identity","perm_media","perm_phone_msg","perm_scan_wifi","person","person_add","person_add_disabled","person_outline","person_pin","person_pin_circle","person_remove","personal_video","pets","phone","phone_android","phone_bluetooth_speaker","phone_callback","phone_disabled","phone_enabled","phone_forwarded","phone_in_talk","phone_iphone","phone_locked","phone_missed","phone_paused","phonelink","phonelink_erase","phonelink_lock","phonelink_off","phonelink_ring","phonelink_setup","photo","photo_album","photo_camera","photo_filter","photo_library","photo_size_select_actual","photo_size_select_large","photo_size_select_small","picture_as_pdf","picture_in_picture","picture_in_picture_alt","pie_chart","pie_chart_outlined","pin_drop","pivot_table_chart","place","plagiarism","play_arrow","play_circle_filled","play_circle_outline","play_for_work","playlist_add","playlist_add_check","playlist_play","plus_one","policy","poll","polymer","pool","portable_wifi_off","portrait","post_add","power","power_input","power_off","power_settings_new","pregnant_woman","present_to_all","print","print_disabled","priority_high","psychology","public","publish","query_builder","question_answer","queue","queue_music","queue_play_next","radio","radio_button_checked","radio_button_unchecked","railway_alert","ramen_dining","rate_review","receipt","receipt_long","recent_actors","recommend","record_voice_over","redeem","redo","refresh","remove","remove_circle","remove_circle_outline","remove_done","remove_from_queue","remove_moderator","remove_red_eye","remove_shopping_cart","reorder","repeat","repeat_on","repeat_one","repeat_one_on","replay","replay_10","replay_30","replay_5","replay_circle_filled","reply","reply_all","report","report_off","report_problem","reset_tv","restaurant","restaurant_menu","restore","restore_from_trash","restore_page","ring_volume","room","room_service","rotate_90_degrees_ccw","rotate_left","rotate_right","rounded_corner","router","rowing","rss_feed","rtt","rv_hookup","satellite","save","save_alt","saved_search","scanner","scatter_plot","schedule","schedule_send","school","science","score","screen_lock_landscape","screen_lock_portrait","screen_lock_rotation","screen_rotation","screen_search_desktop","screen_share","sd","sd_card","sd_storage","search","search_off","security","segment","select_all","self_improvement","send","send_and_archive","sentiment_dissatisfied","sentiment_neutral","sentiment_satisfied","sentiment_satisfied_alt","sentiment_very_dissatisfied","sentiment_very_satisfied","settings","settings_applications","settings_backup_restore","settings_bluetooth","settings_brightness","settings_cell","settings_ethernet","settings_input_antenna","settings_input_component","settings_input_composite","settings_input_hdmi","settings_input_svideo","settings_overscan","settings_phone","settings_power","settings_remote","settings_system_daydream","settings_voice","share","shield","shop","shop_two","shopping_basket","shopping_cart","short_text","show_chart","shuffle","shuffle_on","shutter_speed","signal_cellular_4_bar","signal_cellular_alt","signal_cellular_connected_no_internet_4_bar","signal_cellular_no_sim","signal_cellular_null","signal_cellular_off","signal_wifi_4_bar","signal_wifi_4_bar_lock","signal_wifi_off","sim_card","sim_card_alert","single_bed","skip_next","skip_previous","slideshow","slow_motion_video","smartphone","smoke_free","smoking_rooms","sms","sms_failed","snooze","sort","sort_by_alpha","spa","space_bar","speaker","speaker_group","speaker_notes","speaker_notes_off","speaker_phone","speed","spellcheck","sports","sports_baseball","sports_basketball","sports_cricket","sports_esports","sports_football","sports_golf","sports_handball","sports_hockey","sports_kabaddi","sports_mma","sports_motorsports","sports_rugby","sports_soccer","sports_tennis","sports_volleyball","square_foot","stacked_bar_chart","star","star_border","star_half","stars","stay_current_landscape","stay_current_portrait","stay_primary_landscape","stay_primary_portrait","stop","stop_screen_share","storage","store","store_mall_directory","storefront","straighten","stream","streetview","strikethrough_s","style","subdirectory_arrow_left","subdirectory_arrow_right","subject","subscriptions","subtitles","subtitles_off","subway","supervised_user_circle","supervisor_account","support","surround_sound","swap_calls","swap_horiz","swap_horizontal_circle","swap_vert","swap_vertical_circle","swipe","switch_account","switch_camera","switch_video","sync","sync_alt","sync_disabled","sync_problem","system_update","system_update_alt","tab","tab_unselected","table_chart","tablet","tablet_android","tablet_mac","tag","tag_faces","takeout_dining","tap_and_play","terrain","text_fields","text_format","text_rotate_up","text_rotate_vertical","text_rotation_angledown","text_rotation_angleup","text_rotation_down","text_rotation_none","textsms","texture","theater_comedy","theaters","thumb_down","thumb_down_alt","thumb_down_off_alt","thumb_up","thumb_up_alt","thumb_up_off_alt","thumbs_up_down","time_to_leave","timelapse","timeline","timer","timer_10","timer_3","timer_off","title","toc","today","toggle_off","toggle_on","toll","tonality","touch_app","tour","toys","track_changes","traffic","train","tram","transfer_within_a_station","transform","transit_enterexit","translate","trending_down","trending_flat","trending_up","trip_origin","tune","turned_in","turned_in_not","tv","tv_off","two_wheeler","unarchive","undo","unfold_less","unfold_more","unsubscribe","update","upload_file","usb","verified","verified_user","vertical_align_bottom","vertical_align_center","vertical_align_top","vertical_split","vibration","video_call","video_label","video_library","video_settings","videocam","videocam_off","videogame_asset","view_agenda","view_array","view_carousel","view_column","view_comfy","view_compact","view_day","view_headline","view_list","view_module","view_quilt","view_stream","view_week","vignette","visibility","visibility_off","voice_chat","voice_over_off","voicemail","volume_down","volume_mute","volume_off","volume_up","volunteer_activism","vpn_key","vpn_lock","wallpaper","warning","watch","watch_later","waterfall_chart","waves","wb_auto","wb_cloudy","wb_incandescent","wb_iridescent","wb_shade","wb_sunny","wb_twighlight","wc","web","web_asset","weekend","whatshot","where_to_vote","widgets","wifi","wifi_calling","wifi_lock","wifi_off","wifi_tethering","work","work_off","work_outline","workspaces_filled","workspaces_outline","wrap_text","wrong_location","youtube_searched_for","zoom_in","zoom_out","zoom_out_map"];function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t,r){return(Ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ee(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var a=Ee(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Me(this,r)}}function Me(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe="https://www.googleapis.com/webfonts/v1/webfonts?key=".concat("AIzaSyCzONJUtzxRRszF7MyNLE_qGE8fsmwaNRk","&fields=items(family)"),De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(c,e);var t,r,n,a=je(c);function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=a.call(this,e,t)).valueType_=null,r.textParams_={},r.imageParams_={},r.clipartSrc_=null,r.lastNotifiedValue_={},r.spaceFormValues_={},r}return t=c,(r=[{key:"createUi",value:function(e){var t,r=this,n=Ie(Ee(c.prototype),"createUi",this).call(this,e),a=o()(".form-field-container",n);n.addClass("form-field-image"),this.setupDropTarget_(n),this.el_=o()("<div>").attr("id",this.getHtmlId()).addClass("form-field-buttonset").appendTo(a),t=this.params_.imageOnly?[["image","Select image"]]:[["image","Image"],["clipart","Clipart"],["text","Text"]];var s={};if(t.forEach((function(e){var t=Oe(e,2),n=t[0],a=t[1];o()("<input>").attr({type:"radio",name:r.getHtmlId(),id:"".concat(r.getHtmlId(),"-").concat(n),value:n}).appendTo(r.el_),s[n]=o()("<label>").attr("for","".concat(r.getHtmlId(),"-").concat(n)).attr("tabindex",0).text(a).appendTo(r.el_)})),this.fileEl_=o()("<input>").addClass("form-image-hidden-file-field").attr({id:this.getHtmlId(),type:"file",accept:"image/*"}).on("change",(function(){return r.loadImage_(r.fileEl_.get(0).files)})).appendTo(this.el_),s.image.click((function(e){return r.fileEl_.trigger("click"),r.setValueType_(null),r.renderValueAndNotifyChanged_(),e.preventDefault(),!1})),!this.params_.imageOnly){var l=o()("<div>").addClass("form-image-type-params form-image-type-params-clipart is-hidden").appendTo(a),u=o()("<div>").addClass("form-image-clipart-list").addClass("cancel-parent-scroll").appendTo(l);ze.forEach((function(e){o()("<div>").addClass("form-image-clipart-item").attr("data-name",e).attr("title",e).text(e).click((function(){return r.loadClipart_(e)})).appendTo(u)})),this.$clipartItems=u.find(".form-image-clipart-item"),o()("<input>").addClass("form-image-clipart-filter").attr("placeholder","Find clipart").on("input",(function(e){var t=o()(e.currentTarget).val().toLowerCase().replace(/[^\w]+/g,"");t?r.$clipartItems.each((function(e,r){o()(r).toggle(o()(r).attr("title").indexOf(t)>=0)})):r.$clipartItems.show()})).prependTo(l),o()("<div>").addClass("form-image-clipart-attribution").html('\n              For clipart sources, visit\n              <a target="_blank"\n                 class="external-link"\n                 href="https://github.com/google/material-design-icons">\n              Material Design Icons on GitHub</a>\n              ').appendTo(l),s.clipart.click((function(e){r.setValueType_("clipart"),r.renderValueAndNotifyChanged_()}));var f,h=o()("<div>").addClass("form-subform form-image-type-params form-image-type-params-text is-hidden").appendTo(a);this.textForm_=new oe({id:"".concat(this.form_.id_,"-").concat(this.id_,"-textform"),container:h,fields:[new me("text",{title:"Text"}),f=new O("font",{title:"Font",helpText:"From fonts.google.com"})]}),this.loadGoogleWebFontsList_().then((function(e){return f.setOptions([""].concat(e))}));var d=i.debounce(500,(function(){return r.tryLoadWebFont_()}));this.textForm_.onChange((function(){var e=r.textForm_.getValues();r.textParams_.text=e.text,r.textParams_.fontStack=e.font||"Roboto, sans-serif",d(),r.renderValueAndNotifyChanged_()})),s.text.click((function(e){r.setValueType_("text"),r.renderValueAndNotifyChanged_()}))}if(this.params_.noTrimForm)this.spaceFormValues_={};else{var p=o()("<div>").addClass("form-subform").appendTo(a);this.spaceFormValues_={},this.spaceForm_=new oe({id:"".concat(this.form_.id_,"-").concat(this.id_,"-spaceform"),container:p,fields:[this.spaceFormTrimField_=new F("trim",{title:"Trim whitespace",defaultValue:!0,offText:"Don't trim",onText:"Trim"}),this.spaceFormPaddingField_=new Re("pad",{title:"Padding",defaultValue:this.params_.defaultValuePadding||0,min:-.1,max:.5,step:.05,textFn:function(e){return(100*e).toFixed(0)+"%"}})]}),this.spaceForm_.onChange((function(){r.spaceFormValues_=r.spaceForm_.getValues(),r.renderValueAndNotifyChanged_()})),this.spaceFormValues_=this.spaceForm_.getValues()}this.params_.noPreview||(this.imagePreview_=o()("<canvas>").addClass("form-image-preview").hide().appendTo(a.parent())),this.params_.defaultValueClipart&&setTimeout((function(){r.valueType_||r.loadClipart_(r.params_.defaultValueClipart)}),0)}},{key:"setupDropTarget_",value:function(e){var t,r=this,n=this.params_.dropTarget?o()(this.params_.dropTarget):o()(e);n.addClass("form-field-drop-target").on("dragenter",(function(e){e.preventDefault(),t&&(clearTimeout(t),t=null),n.addClass("drag-hover")})).on("dragleave",(function(e){e.preventDefault(),t&&clearTimeout(t),t=setTimeout((function(){return n.removeClass("drag-hover")}),100)})).on("dragover",(function(e){e.preventDefault(),t&&(clearTimeout(t),t=null),e.originalEvent.dataTransfer.dropEffect="copy"})).on("drop",(function(e){n.removeClass("drag-hover"),e.stopPropagation(),e.preventDefault(),r.loadImage_(e.originalEvent.dataTransfer.files)}))}},{key:"loadImage_",value:function(e){var t=this;c.loadImageFromFileList(e).then((function(e){e&&(t.setValueType_("image"),t.imageParams_=e,t.imageFilename_=e.name.replace(/\.[^.]+?$/,""),t.renderValueAndNotifyChanged_())}))}},{key:"loadGoogleWebFontsList_",value:function(){return new Promise((function(e,t){if("assetStudioWebFontsCache"in localStorage){var r=JSON.parse(localStorage.assetStudioWebFontsCache),n=r.fetchTime,a=r.fonts;if(Number(new Date)-n<36e5)return void e(a)}o.a.ajax({url:Fe,dataType:"json"}).then((function(t){var r=t.items.map((function(e){return e.family}));localStorage.assetStudioWebFontsCache=JSON.stringify({fetchTime:Number(new Date),fonts:r}),e(r)}),(function(e){return t(e)}))}))}},{key:"tryLoadWebFont_",value:function(){var e=this,t=this.textForm_.getValues().font;this.loadedWebFont_!=t&&t&&ce.a.load({google:{families:[t]},active:function(){e.loadedWebFont_=t,e.renderValueAndNotifyChanged_()}})}},{key:"setValueType_",value:function(e){this.valueType_=e,o()("input",this.el_).prop("checked",!1),o()(".form-image-type-params",this.el_.parent()).addClass("is-hidden"),e&&(o()("#".concat(this.getHtmlId(),"-").concat(e)).prop("checked",!0),o()(".form-image-type-params-"+e,this.el_.parent()).removeClass("is-hidden")),this.spaceForm_&&(this.spaceFormTrimField_.setEnabled(!0),this.spaceFormPaddingField_.setEnabled(!0),"clipart"==e?this.params_.clipartNoTrimPadding&&(this.spaceFormTrimField_.setEnabled(!1),this.spaceFormTrimField_.setValue(!1),this.spaceFormPaddingField_.setEnabled(!1),this.spaceFormPaddingField_.setValue(0)):"text"==e&&(this.spaceFormTrimField_.setEnabled(!1),this.spaceFormTrimField_.setValue(!0)))}},{key:"loadClipart_",value:function(e){this.$clipartItems.removeClass("is-selected"),this.$clipartItems.filter('[data-name="'.concat(e,'"]')).addClass("is-selected"),this.setValueType_("clipart"),this.clipartSrc_=e,this.renderValueAndNotifyChanged_()}},{key:"clearValue",value:function(){this.valueType_=null,this.valueCtx_=null,this.valueOrigImg_=null,this.fileEl_.val(""),this.imagePreview_&&this.imagePreview_.hide()}},{key:"getValue",value:function(){var e=null;switch(this.valueType_){case"image":e=this.imageFilename_;break;case"clipart":e=this.clipartSrc_;break;case"text":e=this.textParams_.text}return{ctx:this.valueCtx_,origImg:this.valueOrigImg_,type:this.valueType_,name:e}}},{key:"notifyChanged_",value:function(e,t){Ie(Ee(c.prototype),"notifyChanged_",this).call(this,e,t),this.lastNotifiedValue_=Object.assign({},e)}},{key:"renderValueAndNotifyChanged_",value:function(){var e=this;if(!this.valueType_)return this.valueCtx_=null,this.valueOrigImg_=null,void this.notifyChanged_(this.getValue(),this.lastNotifiedValue_);this.renderTimeout_&&(clearTimeout(this.renderTimeout_),this.renderTimeout_=null),this.rendering_?this.renderTimeout_=setTimeout((function(){return e.renderValueAndNotifyChanged_()}),100):(this.rendering_=!0,this.renderSource_().then((function(t){var r=t.ctx,n=t.size;e.computeTrimRect_(r,n).then((function(t){var n=e.spaceFormValues_.pad||0,a=Math.round(n*Math.min(t.w,t.h));e.valueCtx_=Le.a.context({w:t.w+2*a,h:t.h+2*a}),e.valueCtx_.drawImage(r.canvas,t.x,t.y,t.w,t.h,a,a,t.w,t.h),e.imagePreview_&&(e.imagePreview_.attr({width:e.valueCtx_.canvas.width,height:e.valueCtx_.canvas.height}),e.imagePreview_.get(0).getContext("2d").drawImage(e.valueCtx_.canvas,0,0),e.imagePreview_.show()),e.rendering_=!1,e.notifyChanged_(e.getValue(),e.lastNotifiedValue_)}))})).catch((function(t){console.error("Error: "+t),e.rendering_=!1,e.notifyChanged_(e.getValue(),e.lastNotifiedValue_)})))}},{key:"renderSource_",value:function(){var e=this;return new Promise((function(t,r){switch(e.valueType_){case"image":e.imageParams_.uri?i.loadImageFromUri(e.imageParams_.uri).then((function(r){e.valueOrigImg_=r;var n={w:r.naturalWidth,h:r.naturalHeight},a=Object.assign({},n);e.imageParams_.isSvg&&e.params_.maxFinalSize&&(a.w/a.h>e.params_.maxFinalSize.w/e.params_.maxFinalSize.h?(a.w=e.params_.maxFinalSize.w,a.h=a.w*n.h/n.w):(a.h=e.params_.maxFinalSize.h,a.w=a.h*n.w/n.h));var o=Le.a.context(a);o.drawImage(r,0,0,a.w,a.h),t({ctx:o,size:a})})):r("no uri");break;case"clipart":var n={w:1536,h:1536},a=Le.a.context(n),o=e.clipartSrc_;a.fillStyle="#000",a.font="".concat(n.h,"px/").concat(n.h,"px 'Material Icons'"),a.textBaseline="alphabetic",a.fillText(o,0,n.h),t({ctx:a,size:n});break;case"text":var c=.75*(n={w:6144,h:1536}).h;a=Le.a.context(n),o=" "+(o=e.textParams_.text||"")+" ",a.fillStyle="#000",a.font="bold ".concat(c,"px/").concat(n.h,"px ").concat(e.textParams_.fontStack),a.textBaseline="alphabetic",a.fillText(o,0,c),n.w=Math.ceil(Math.min(a.measureText(o).width,n.w)||n.w),t({ctx:a,size:n});break;default:r("No value type")}}))}},{key:"computeTrimRect_",value:function(e,t){var r=this;return new Promise((function(n,a){r.spaceFormValues_.trim?(r.trimPromise_&&r.trimPromise_.worker&&r.trimPromise_.worker.terminate(),r.trimPromise_=Be.a.getTrimRect(e,t,1).then((function(e){var r=.01*Math.min(t.w,t.h);Object.assign(e,{x:Math.max(Math.floor(e.x-r),0),y:Math.max(Math.floor(e.y-r),0),w:Math.ceil(e.w+2*r),h:Math.ceil(e.h+2*r)}),e.w=Math.min(e.w,t.w-e.x),e.h=Math.min(e.h,t.h-e.y),n(e)})).catch(a)):n({x:0,y:0,w:t.w,h:t.h})}))}},{key:"serializeValue",value:function(){var e={type:this.valueType_,clipart:"clipart"==this.valueType_?this.clipartSrc_:null,text:"text"==this.valueType_?this.textForm_.getValuesSerialized():null};return this.spaceForm_&&(e.space=this.spaceForm_.getValuesSerialized()),e}},{key:"deserializeValue",value:function(e){e.type&&this.setValueType_(e.type),e.space&&(this.spaceForm_.setValuesSerialized(e.space),this.spaceFormValues_=this.spaceForm_.getValues()),e.clipart&&"clipart"==this.valueType_&&this.loadClipart_(e.clipart),e.text&&"text"==this.valueType_&&(this.textForm_.setValuesSerialized(e.text),this.tryLoadWebFont_())}}])&&Pe(t.prototype,r),n&&Pe(t,n),c}(v);De.loadImageFromFileList=function(e){return new Promise((function(t,r){e=e||[];var n=Array.from(e).find((function(e){return De.isValidFile_(e)}));if(!n)return alert("Please choose a valid image file (PNG, JPG, GIF, SVG, etc.)"),void t(null);var a="image/svg+xml"==n.type,o=new FileReader;o.onload=function(e){return t({isSvg:a,uri:e.target.result,name:n.name})},o.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:alert("File not found!");break;case e.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case e.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}t(null)},o.onabort=function(e){alert("File read cancelled"),t(null)},o.readAsDataURL(n)}))},De.isValidFile_=function(e){return!!e.type.toLowerCase().match(/^image\//)},o()(document).ready((function(){o()(".cancel-parent-scroll").on("mousewheel DOMMouseScroll",(function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail;e.currentTarget.scrollTop-=t,e.preventDefault()}))}));var Ae=r(123),Le=r(26),Be=r(296);function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ne=new Set(["xxxhdpi","xxhdpi","xhdpi","hdpi","mdpi"]),$e=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.regenerateDebounced_=i.debounce(200,(function(){return t.regenerate()})),this.setupZipper(),this.setupOutputUi(),this.setupOutputSlots(),this.setupForm(),u.bindFormToDocumentHash(this.form),setTimeout((function(){return t.regenerate()}),0)}var t,r,n;return t=e,(r=[{key:"setupZipper",value:function(){this.zipper=m(o()("#download-zip-button"))}},{key:"setupOutputUi",value:function(){if(this.gridOverlaySvg){var e=!("assetStudioShowGrid"in localStorage)||"true"===localStorage.assetStudioShowGrid;o()("#grid-toggle").prop("checked",e),o()(".outputs-panel").toggleClass("show-grid",e),o()("#grid-toggle").click((function(e){var t=o()(e.currentTarget).is(":checked");localStorage.assetStudioShowGrid=String(t),o()(".outputs-panel").toggleClass("show-grid",t)}))}else o()("#grid-toggle-container").hide();o()(".outputs-additional-toggle").click((function(){return o()(".outputs-panel").toggleClass("is-showing-all")}))}},{key:"setupOutputSlots",value:function(){var e=this;this.densities.forEach((function(t){e.createImageOutputSlot_({container:"xxxhdpi"==t?o()(".outputs-main"):o()(".outputs-additional"),id:t,label:t})}))}},{key:"createImageOutputSlot_",value:function(e){var t=o()("<div>").addClass("outputs-image-container").append(o()("<img>").addClass("outputs-image").attr("data-id","out-icon-".concat(e.id)));return"web"!=e.id&&this.gridOverlaySvg&&o()("<div>").addClass("outputs-image-overlay").html(this.gridOverlaySvg).appendTo(t),o()("<div>").addClass("outputs-image-block").append(o()("<div>").addClass("outputs-label").text(e.label)).append(t).appendTo(e.container)}},{key:"setImageForSlot_",value:function(e,t){i.loadImageFromUri(t).then((function(t){return o()('[data-id="out-icon-'.concat(e,'"]')).attr("src",t.src)}))}},{key:"setupForm",value:function(){}},{key:"regenerate",value:function(){}},{key:"densities",get:function(){return Ne}}])&&Ue(t.prototype,r),n&&Ue(t,n),e}();function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ke(e);if(t){var a=Ke(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Je(this,r)}}function Je(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qe={w:48,h:48},et={none:{x:3,y:3,w:42,h:42},circle:{x:2,y:2,w:44,h:44},square:{x:5,y:5,w:38,h:38},vrect:{x:8,y:2,w:32,h:44},hrect:{x:2,y:8,w:44,h:32}},tt=[{id:"none",title:"None"},{id:"elevate",title:"Elevate"},{id:"shadow",title:"Cast shadow"},{id:"score",title:"Score"}],rt=[{id:"none",title:"None"},{id:"score",title:"Score"}],nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(o,e);var t,r,n,a=Ze(o);function o(){return qe(this,o),a.apply(this,arguments)}return t=o,(r=[{key:"setupForm",value:function(){var e,t,r=this;this.form=new oe({id:"iconform",container:"#inputs-form",fields:[new De("foreground",{title:"Foreground",maxFinalSize:{w:720,h:720},defaultValueTrim:1,defaultValuePadding:.25,defaultValueClipart:"android",dropTarget:document.body}),new ne("foreColor",{newGroup:!0,title:"Color",helpText:"Set to transparent to use original colors",alpha:!0,defaultValue:"rgba(96, 125, 139, 0)"}),e=new ne("backColor",{title:"Background color",defaultValue:"#448aff"}),new F("crop",{title:"Scaling",defaultValue:!1,offText:"Center",onText:"Crop"}),new O("backgroundShape",{title:"Shape",helpText:"Web version will always be square",options:[{id:"none",title:"None"},{id:"square",title:"Square"},{id:"circle",title:"Circle"},{id:"vrect",title:"Tall rect"},{id:"hrect",title:"Wide rect"}],defaultValue:"square",onChange:function(r){e.setEnabled("none"!=r);var n="none"==r?rt:tt;n.find((function(e){return e.id==t.getValue()}))||t.setValue(n[0].id),t.setOptions(n)}}),t=new O("effects",{title:"Effect",buttons:!0,options:tt,defaultValue:"none"}),new me("name",{title:"Name",defaultValue:"ic_launcher"})]}),this.form.onChange((function(e){return r.regenerateDebounced_()}))}},{key:"regenerate",value:function(){var e=this,t=this.form.getValues();t.name=t.name||"ic_launcher",this.zipper.clear(),this.zipper.setZipFilename("".concat(t.name,".zip"));var r=null;this.densities.forEach((function(n){var a;if("xxxhdpi"==n||"web"==n)a=e.regenerateRawAtDensity_(n),"xxxhdpi"==n&&(r=a);else{var o=i.getMultBaseMdpi(n),c=i.multRound(Qe,o);a=Le.a.context(c),Le.a.drawImageScaled(a,r,0,0,192,192,0,0,c.w,c.h)}e.zipper.add({name:"web"==n?"web_hi_res_512.png":"mipmap-".concat(n,"/").concat(t.name,".png"),canvas:a.canvas}),e.setImageForSlot_(n,a.canvas.toDataURL())}))}},{key:"regenerateRawAtDensity_",value:function(e){var t=this.form.getValues(),r=t.foreground?t.foreground.ctx:null,n=i.getMultBaseMdpi(e);"web"==e&&(n=512/48);var a=i.multRound(Qe,n),o=et[t.backgroundShape];"web"==e&&(o={x:0,y:0,w:48,h:48});var c=Le.a.context(a),s={draw:function(r){if(r.scale(n,n),t.backColor.setAlpha(1),r.fillStyle=t.backColor.toRgbString(),"web"==e)return"none"==t.backgroundShape&&(r.fillStyle="white"),void r.fillRect(0,0,48,48);var a=et[t.backgroundShape];switch(t.backgroundShape){case"square":case"vrect":case"hrect":!function(e,t,r){var n=t.x,a=t.y,o=t.w,i=t.h;e.beginPath(),e.moveTo(n+o-r,a),e.arcTo(n+o,a,n+o,a+r,r),e.lineTo(n+o,a+i-r),e.arcTo(n+o,a+i,n+o-r,a+i,r),e.lineTo(n+r,a+i),e.arcTo(n,a+i,n,a+i-r,r),e.lineTo(n,a+r),e.arcTo(n,a,n+r,a,r),e.closePath()}(r,a,3),r.fill();break;case"circle":r.beginPath(),r.arc(a.x+a.w/2,a.y+a.h/2,a.w/2,0,2*Math.PI,!1),r.closePath(),r.fill()}},mask:!0},l={draw:function(e){r&&(0,Le.a[t.crop?"drawCenterCrop":"drawCenterInside"])(e,r,i.mult(o,n),{x:0,y:0,w:r.canvas.width,h:r.canvas.height})},effects:[],mask:!("none"!=t.backgroundShape)};"none"!=t.backgroundShape&&"shadow"==t.effects&&l.effects.push({effect:"cast-shadow"}),t.foreColor.getAlpha()&&l.effects.push({effect:"fill-color",color:t.foreColor.toRgbString()}),"none"==t.backgroundShape||"elevate"!=t.effects&&"shadow"!=t.effects||(l.effects=[].concat(Ge(l.effects),[{effect:"outer-shadow",color:"rgba(0, 0, 0, 0.2)",translateY:.25*n},{effect:"outer-shadow",color:"rgba(0, 0, 0, 0.2)",blur:1*n,translateY:1*n}]));var u={draw:function(e){e.fillStyle="rgba(0, 0, 0, .1)",e.fillRect(0,0,a.w,a.h/2)}},f=[{effect:"inner-shadow",color:"rgba(255, 255, 255, 0.2)",translateY:.25*n},{effect:"inner-shadow",color:"rgba(0, 0, 0, 0.2)",translateY:-.25*n},{effect:"outer-shadow",color:"rgba(0, 0, 0, 0.3)",blur:.7*n,translateY:.7*n},{effect:"fill-radialgradient",centerX:0,centerY:0,radius:a.w,colors:[{offset:0,color:"rgba(255,255,255,.1)"},{offset:1,color:"rgba(255,255,255,0)"}]}];return"web"==e&&("none"==t.backgroundShape?(l.effects=[].concat(Ge(l.effects),Ge(f)),f=[]):f=f.filter((function(e){return e.effect.match(/fill/)}))),Le.a.drawLayers(c,a,{children:["web"==e||"none"!=t.backgroundShape?s:null,l,"score"==t.effects?u:null],effects:f}),c}},{key:"densities",get:function(){return new Set(["xxxhdpi","web","xxhdpi","xhdpi","hdpi","mdpi"])}},{key:"gridOverlaySvg",get:function(){return'<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n        <g fill="none" fill-rule="evenodd">\n            <rect vector-effect="non-scaling-stroke" x="8" y="2" width="32" height="44" rx="3"/>\n            <rect vector-effect="non-scaling-stroke" x="5" y="5" width="38" height="38" rx="3"/>\n            <rect vector-effect="non-scaling-stroke" x="2" y="8" width="44" height="32" rx="3"/>\n            <circle vector-effect="non-scaling-stroke" cx="24" cy="24" r="10"/>\n            <circle vector-effect="non-scaling-stroke" cx="24" cy="24" r="22"/>\n            <path vector-effect="non-scaling-stroke" d="M0 48L48 0M0 0l48 48M24 48V0M17 0v48M31 0v48M48 24H0M0 31h48M0 17h48"/>\n        </g>\n    </svg>'}}])&&Ye(t.prototype,r),n&&Ye(t,n),o}($e);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ct(e,t,r){return(ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ft(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ft(e);if(t){var a=ft(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ut(this,r)}}function ut(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ht={w:48,h:48},dt={x:12,y:12,w:24,h:24},pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(o,e);var t,r,n,a=lt(o);function o(){return ot(this,o),a.apply(this,arguments)}return t=o,(r=[{key:"setupForm",value:function(){var e=this;ct(ft(o.prototype),"setupForm",this).call(this);var t,r=function(e){var t=i.sanitizeResourceName(e.name||"example");return"ic_shortcut_".concat(t)};this.form=new oe({id:"iconform",container:"#inputs-form",fields:[new De("source",{title:"Source",helpText:"Must be transparent",maxFinalSize:{w:128,h:128},clipartNoTrimPadding:!0,defaultValueClipart:"search",dropTarget:document.body,onChange:function(e,n){t.getValue()==r(n)&&t.setValue(r(e))}}),t=new me("name",{newGroup:!0,title:"Name",helpText:"Used when generating ZIP files.",defaultValue:r({})}),new ne("foreColor",{title:"Color",defaultValue:"#448aff"}),new ne("backColor",{title:"Background color",defaultValue:"#f5f5f5"})]}),this.form.onChange((function(){return e.regenerateDebounced_()}))}},{key:"regenerate",value:function(){var e=this,t=this.form.getValues();t.name=t.name||"ic_shortcut",this.zipper.clear(),this.zipper.setZipFilename("".concat(t.name,".zip")),this.densities.forEach((function(r){var n=i.getMultBaseMdpi(r),a=i.multRound(ht,n),o=Le.a.context(a),c=Le.a.context(a);if(o.save(),o.beginPath(),o.arc(24*n,24*n,22*n,0,2*Math.PI),o.closePath(),t.backColor.setAlpha(1),o.fillStyle=t.backColor.toRgbString(),o.fill(),o.restore(),t.source.ctx){var s=t.source.ctx;Le.a.drawCenterInside(c,s,i.mult(dt,n),{x:0,y:0,w:s.canvas.width,h:s.canvas.height})}t.foreColor.setAlpha(1),Ae.a.fx([{effect:"fill-color",color:t.foreColor.toRgbString()}],o,c,a),e.zipper.add({name:"res/drawable-".concat(r,"/").concat(t.name,".png"),canvas:o.canvas}),e.setImageForSlot_(r,o.canvas.toDataURL())}))}},{key:"gridOverlaySvg",get:function(){return'<svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\n        <g fill="none" fill-rule="evenodd">\n            <rect vector-effect="non-scaling-stroke" x="12" y="12" width="24" height="24"/>\n        </g>\n    </svg>'}}])&&it(t.prototype,r),n&&it(t,n),o}($e);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t,r){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xt(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return wt(this,r)}}function wt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kt={w:24,h:24},St={x:0,y:0,w:24,h:24},Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(c,e);var t,r,n,a=bt(c);function c(){return mt(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"setupForm",value:function(){var e=this;yt(xt(c.prototype),"setupForm",this).call(this);var t,r,n=function(e){var t=i.sanitizeResourceName(e.name||"example");return"ic_action_".concat(t)};this.form=new oe({id:"iconform",container:"#inputs-form",fields:[new De("source",{title:"Source",helpText:"Must be transparent",maxFinalSize:{w:128,h:128},clipartNoTrimPadding:!0,defaultValueClipart:"add_circle",dropTarget:document.body,onChange:function(e,r){t.getValue()==n(r)&&t.setValue(n(e))}}),t=new me("name",{newGroup:!0,title:"Name",helpText:"Used when generating ZIP files.",defaultValue:n({})}),new O("theme",{title:"Theme",buttons:!0,options:[{id:"light",title:"Light"},{id:"dark",title:"Dark"},{id:"custom",title:"Custom"}],defaultValue:"light"}),r=new ne("color",{title:"Color",defaultValue:"rgba(33, 150, 243, .6)",alpha:!0})]}),this.form.onChange((function(t){var n=e.form.getValues();o()(".outputs-panel").attr("data-theme",n.theme),r.setEnabled("custom"==n.theme),e.regenerateDebounced_()}))}},{key:"regenerate",value:function(){var e=this,t=this.form.getValues();t.name=t.name||"ic_action",this.zipper.clear(),this.zipper.setZipFilename("".concat(t.name,".zip")),this.densities.forEach((function(r){var n=i.getMultBaseMdpi(r),a=i.multRound(kt,n),o=Le.a.context(a),c=Le.a.context(a);if(t.source.ctx){var s=t.source.ctx;Le.a.drawCenterInside(c,s,i.mult(St,n),{x:0,y:0,w:s.canvas.width,h:s.canvas.height})}var l=t.color;"light"==t.theme?l=A()("rgba(0, 0, 0, .54)"):"dark"==t.theme&&(l=A()("#fff"));var u=l.getAlpha();l.setAlpha(1),Ae.a.fx([{effect:"fill-color",color:l.toRgbString(),opacity:u}],o,c,a),l.setAlpha(u),e.zipper.add({name:"res/drawable-".concat(r,"/").concat(t.name,".png"),canvas:o.canvas}),e.setImageForSlot_(r,o.canvas.toDataURL())}))}},{key:"gridOverlaySvg",get:function(){return'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n        <g fill="none" fill-rule="evenodd">\n            <rect vector-effect="non-scaling-stroke" x="4" y="2" width="16" height="20" rx="2"/>\n            <rect vector-effect="non-scaling-stroke" x="3" y="3" width="18" height="18" rx="2"/>\n            <rect vector-effect="non-scaling-stroke" x="2" y="4" width="20" height="16" rx="2"/>\n            <circle vector-effect="non-scaling-stroke" cx="12" cy="12" r="5"/>\n            <circle vector-effect="non-scaling-stroke" cx="12" cy="12" r="10"/>\n            <path vector-effect="non-scaling-stroke" d="M0 24L24 0M0 0l24 24m-12 0V0M8 0v24m8-24v24m8-12H0m0 4h24M0 8h24"/>\n        </g>\n    </svg>'}}])&&gt(t.prototype,r),n&&gt(t,n),c}($e);function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tt(e,t,r){return(Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jt(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=jt(e);if(t){var a=jt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Vt(this,r)}}function Vt(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt={w:24,h:24},Et={x:1,y:1,w:22,h:22},Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(c,e);var t,r,n,a=It(c);function c(){return Ct(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"setupForm",value:function(){var e=this;Tt(jt(c.prototype),"setupForm",this).call(this),o()(".outputs-panel").attr("data-theme","dark");var t,r=function(e){var t=i.sanitizeResourceName(e.name||"example");return"ic_stat_".concat(t)};this.form=new oe({id:"iconform",container:"#inputs-form",fields:[new De("source",{title:"Source",helpText:"Must be transparent",maxFinalSize:{w:128,h:128},defaultValueClipart:"ac_unit",dropTarget:document.body,onChange:function(e,n){t.getValue()==r(n)&&t.setValue(r(e))}}),t=new me("name",{newGroup:!0,title:"Name",helpText:"Used when generating ZIP files.",defaultValue:r({})})]}),this.form.onChange((function(t){return e.regenerateDebounced_()}))}},{key:"regenerate",value:function(){var e=this,t=this.form.getValues();t.name=t.name||"ic_stat",this.zipper.clear(),this.zipper.setZipFilename("".concat(t.name,".zip")),this.densities.forEach((function(r){var n=i.getMultBaseMdpi(r),a=i.multRound(Mt,n),o=Le.a.context(a),c=Le.a.context(a);if(t.source.ctx){var s=t.source.ctx;Le.a.drawCenterInside(c,s,i.mult(Et,n),{x:0,y:0,w:s.canvas.width,h:s.canvas.height})}Ae.a.fx([{effect:"fill-color",color:"#fff"}],o,c,a),e.zipper.add({name:"res/drawable-".concat(r,"/").concat(t.name,".png"),canvas:o.canvas}),e.setImageForSlot_(r,o.canvas.toDataURL())}))}}])&&Ot(t.prototype,r),n&&Ot(t,n),c}($e);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bt(e,t,r){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wt(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Wt(e);if(t){var a=Wt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return $t(this,r)}}function $t(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(o,e);var t,r,n,a=Nt(o);function o(){return At(this,o),a.apply(this,arguments)}return t=o,(r=[{key:"setupForm",value:function(){var e=this;Bt(Wt(o.prototype),"setupForm",this).call(this);var t,r=function(e){var t=i.sanitizeResourceName(e.name||"example");return"ic_".concat(t)};this.form=new oe({id:"iconform",container:"#inputs-form",fields:[new De("source",{title:"Source",helpText:"Must be transparent",maxFinalSize:{w:720,h:720},defaultValueClipart:"ac_unit",dropTarget:document.body,onChange:function(e,n){t.getValue()==r(n)&&t.setValue(r(e))}}),new Re("size",{newGroup:!0,title:"Asset size",helpText:"Size of the final asset",min:4,max:200,defaultValue:32,textFn:function(e){return"".concat(e,"dp")}}),new Re("padding",{title:"Asset padding",helpText:"Padding around the icon asset",defaultValue:8,textFn:function(e){return"".concat(e,"dp")}}),new ne("color",{title:"Color",helpText:"Set to transparent to retain original colors",defaultValue:"rgba(0, 0, 0, 0.54)",alpha:!0}),t=new me("name",{title:"Name",helpText:"Used when generating ZIP files as the resource name.",defaultValue:r({})})]}),this.form.onChange((function(t){return e.regenerateDebounced_()}))}},{key:"regenerate",value:function(){var e=this,t=this.form.getValues();t.name=t.name||"icon",this.zipper.clear(),this.zipper.setZipFilename("".concat(t.name,".zip")),this.densities.forEach((function(r){var n=i.getMultBaseMdpi(r),a=t.size,o=Math.min(t.size/2-1,t.padding),c=i.multRound({w:a,h:a},n),s=i.multRound({x:o,y:o,w:a-2*o,h:a-2*o},n),l=Le.a.context(c),u=Le.a.context(c);if(t.source.ctx){var f=t.source.ctx;Le.a.drawCenterInside(u,f,s,{x:0,y:0,w:f.canvas.width,h:f.canvas.height})}var h=t.color,d=h.getAlpha();d>0?(h.setAlpha(1),Ae.a.fx([{effect:"fill-color",color:h.toRgbString(),opacity:d}],l,u,c),h.setAlpha(d)):l.drawImage(u.canvas,0,0),e.zipper.add({name:"res/drawable-".concat(r,"/").concat(t.name,".png"),canvas:l.canvas}),e.setImageForSlot_(r,l.canvas.toDataURL())}))}}])&&Lt(t.prototype,r),n&&Lt(t,n),o}($e);function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,r,n;return t=e,(r=[{key:"reset",value:function(){this._a=1,this._b=0,this._index=0}},{key:"addNext",value:function(e){this._a=(this._a+e)%65521,this._b=(this._b+this._a)%65521}},{key:"compute",value:function(){return this._b<<16|this._a}}])&&Ht(t.prototype,r),n&&Ht(t,n),e}(),Yt=function(e){if(e.srcCtx){var t,r,n=e.srcCtx.getImageData(0,0,e.srcSize.w,e.srcSize.h),a=Jt(e,n,0,0),o={l:0,t:0,r:0,b:0};e:for(r=0;r<e.srcSize.h;r++)for(t=0;t<e.srcSize.w;t++)if(Jt(e,n,t,r)!=a)break e;o.t=r;e:for(t=0;t<e.srcSize.w;t++)for(r=0;r<e.srcSize.h;r++)if(Jt(e,n,t,r)!=a)break e;o.l=t;e:for(r=e.srcSize.h-1;r>=0;r--)for(t=0;t<e.srcSize.w;t++)if(Jt(e,n,t,r)!=a)break e;o.b=e.srcSize.h-r-1;e:for(t=e.srcSize.w-1;t>=0;t--)for(r=0;r<e.srcSize.h;r++)if(Jt(e,n,t,r)!=a)break e;if(o.r=e.srcSize.w-t-1,!(o.l<=0&&o.t<=0&&o.r<=0&&o.b<=0)){var i={w:e.srcSize.w-o.l-o.r,h:e.srcSize.h-o.t-o.b},c={contentRect:Kt(i,{x:e.contentRect.x-o.l,y:e.contentRect.y-o.t,w:e.contentRect.w,h:e.contentRect.h}),stretchRect:Kt(i,{x:e.stretchRect.x-o.l,y:e.stretchRect.y-o.t,w:e.stretchRect.w,h:e.stretchRect.h}),opticalBoundsRect:Kt(i,{x:e.opticalBoundsRect.x-o.l,y:e.opticalBoundsRect.y-o.t,w:e.opticalBoundsRect.w,h:e.opticalBoundsRect.h})};e.name="".concat(e.name,"-EDGES_TRIMMED");var s=Le.a.context(i);s.drawImage(e.srcCtx.canvas,o.l,o.t,i.w,i.h,0,0,i.w,i.h),e.loadSourceImage(s,c)}}},Xt=function(e){if(e.srcCtx){var t,r,n=e.srcCtx.getImageData(0,0,e.srcSize.w,e.srcSize.h),a=e.stretchRect.w>4,o=e.stretchRect.h>4,i=new qt,c=!0,s=-1;for(t=e.stretchRect.x;t<e.stretchRect.x+e.stretchRect.w;t++){for(i.reset(),r=0;r<e.srcSize.h;r++)i.addNext(Jt(e,n,t,r));if(c)s=i.compute(),c=!1;else if(i.compute()!=s){a=!1;break}}for(c=!0,r=e.stretchRect.y;r<e.stretchRect.y+e.stretchRect.h;r++){for(i.reset(),t=0;t<e.srcSize.w;t++)i.addNext(Jt(e,n,t,r));if(c)s=i.compute(),c=!1;else if(i.compute()!=s){o=!1;break}}if(a||o){var l={l:e.stretchRect.x,t:e.stretchRect.y,r:e.srcSize.w-e.stretchRect.x-e.stretchRect.w,b:e.srcSize.h-e.stretchRect.y-e.stretchRect.h},u={w:a?4:e.stretchRect.w,h:o?4:e.stretchRect.h},f={w:l.l+u.w+l.r,h:l.t+u.h+l.b},h=Le.a.context(f);l.l&&l.t&&h.drawImage(e.srcCtx.canvas,0,0,l.l,l.t,0,0,l.l,l.t),l.l&&l.b&&h.drawImage(e.srcCtx.canvas,0,e.srcSize.h-l.b,l.l,l.b,0,f.h-l.b,l.l,l.b),l.r&&l.t&&h.drawImage(e.srcCtx.canvas,e.srcSize.w-l.r,0,l.r,l.t,f.w-l.r,0,l.r,l.t),l.r&&l.b&&h.drawImage(e.srcCtx.canvas,e.srcSize.w-l.r,e.srcSize.h-l.b,l.r,l.b,f.w-l.r,f.h-l.b,l.r,l.b),l.t&&h.drawImage(e.srcCtx.canvas,l.l,0,e.stretchRect.w,l.t,l.l,0,f.w-l.l-l.r,l.t),l.l&&h.drawImage(e.srcCtx.canvas,0,l.t,l.l,e.stretchRect.h,0,l.t,l.l,f.h-l.t-l.b),l.r&&h.drawImage(e.srcCtx.canvas,e.srcSize.w-l.r,l.t,l.r,e.stretchRect.h,f.w-l.r,l.t,l.r,f.h-l.t-l.b),l.b&&h.drawImage(e.srcCtx.canvas,l.l,e.srcSize.h-l.b,e.stretchRect.w,l.b,l.l,f.h-l.b,f.w-l.l-l.r,l.b),h.drawImage(e.srcCtx.canvas,l.l,l.t,e.stretchRect.w,e.stretchRect.h,l.l,l.t,f.w-l.l-l.r,f.h-l.t-l.b);var d={stretchRect:{x:e.stretchRect.x,y:e.stretchRect.y,w:u.w,h:u.h},contentRect:{x:e.contentRect.x,y:e.contentRect.y,w:e.contentRect.w+u.w-e.stretchRect.w,h:e.contentRect.h+u.h-e.stretchRect.h},opticalBoundsRect:{x:e.opticalBoundsRect.x,y:e.opticalBoundsRect.y,w:e.opticalBoundsRect.w+u.w-e.stretchRect.w,h:e.opticalBoundsRect.h+u.h-e.stretchRect.h}};e.name="".concat(e.name,"-STRETCH_TRIMMED"),e.loadSourceImage(h,d)}}},Zt=function(e,t){if(!e.srcCtx)return null;var r,n,a=e.srcCtx.getImageData(0,0,e.srcSize.w,e.srcSize.h),o=[];for(r=0;r<e.srcSize.w;r++)for(n=0;n<e.srcSize.h;n++){var i=a.data[4*(n*e.srcSize.w+r)+3];o[i]=o[i]?o[i]+1:1}for(var c=0,s=0,l=0,u=0,f=0;f<256;f++)o[f]>s?(l=c,u=s,c=f,s=o[f]):o[f]>u&&(l=f,u=o[f]);var h=c>l?c:l,d={l:-1,r:-1,t:-1,b:-1};e:for(r=0;r<e.srcSize.w;r++)for(n=0;n<e.srcSize.h;n++){if(a.data[4*(n*e.srcSize.w+r)+3]>=h-5){d.l=r;break e}}e:for(r=e.srcSize.w-1;r>=0;r--)for(n=0;n<e.srcSize.h;n++){if(a.data[4*(n*e.srcSize.w+r)+3]>=h-5){d.r=r;break e}}e:for(n=0;n<e.srcSize.h;n++)for(r=0;r<e.srcSize.w;r++){if(a.data[4*(n*e.srcSize.w+r)+3]>=h-5){d.t=n;break e}}e:for(n=e.srcSize.h-1;n>=0;n--)for(r=0;r<e.srcSize.w;r++){if(a.data[4*(n*e.srcSize.w+r)+3]>=h-5){d.b=n;break e}}if(d.l>=0&&d.r>d.l&&d.t>=0&&d.b>d.t){var p={x:d.l,y:d.t,w:d.r-d.l+1,h:d.b-d.t+1};if("opticalbounds"==t||"padding"==t)return p}if("stretch"==t){var _=Object.assign({},e.stretchRect),m=new qt,g=[];for(n=0;n<e.srcSize.h;n++){m.reset();for(var y=0;y<e.srcSize.w;y++)m.addNext(Jt(e,a,y,n));g.push(m.compute())}for(var v=Qt(g),b=0;b<v.length;b++){var w=v[b],x=!1;for(r=0;r<e.srcSize.w;r++){if(a.data[4*(w.start*e.srcSize.w+r)+3]>=h-5){x=!0;break}}if(x){_.y=w.start,_.h=w.length,w.length>=4&&(_.y++,_.h-=2);break}}for(m.reset(),g=[],r=0;r<e.srcSize.w;r++){for(m.reset(),n=0;n<e.srcSize.h;n++)m.addNext(Jt(e,a,r,n));g.push(m.compute())}v=Qt(g);for(var k=0;k<v.length;k++){var S=v[k],R=!1;for(n=0;n<e.srcSize.h;n++){if(a.data[4*(n*e.srcSize.w+S.start)+3]>=h-5){R=!0;break}}if(R){_.x=S.start,_.w=S.length,S.length>=4&&(_.x++,_.w-=2);break}}return _}return null};function Jt(e,t,r,n){return(t.data[4*(n*e.srcSize.w+r)+0]<<16)+(t.data[4*(n*e.srcSize.w+r)+1]<<8)+(t.data[4*(n*e.srcSize.w+r)+2]<<0)+(t.data[4*(n*e.srcSize.w+r)+3]<<24)}function Kt(e,t){return t.x<0&&(t.w+=t.x,t.x+=-t.x),t.x+t.w>e.w&&(t.w=e.w-t.x),t.y<0&&(t.h+=t.y,t.y+=-t.y),t.y+t.h>e.h&&(t.h=e.h-t.y),t}function Qt(e){for(var t=[],r=-1,n=0,a=0;a<e.length;a++)r<0?(r=a,n=e[a]):e[a]!=n&&(r!=a-1&&t.push({start:r,length:a-r}),r=a,n=e[a]);return r!=e.length-1&&t.push({start:r,length:e.length-r}),t.sort((function(e,t){return t.length-e.length}))}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tr={x:0,y:0,w:0,h:0},rr=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zoom=1,this.matteColor="light",this.editMode="stretch",this.stretchRect=Object.assign({},tr),this.contentRect=Object.assign({},tr),this.opticalBoundsRect=Object.assign({},tr),this.name="default",this.changeListeners_=[],this.$stage=o()(".nine-patch-stage"),this.$canvasContainer=o()(".stage-canvas-container"),this.setupUi(),this.setupDragging(),o()(window).on("resize",(function(){t.relayout(),t.redrawOverlay()}))}var t,r,n;return t=e,(r=[{key:"onChange",value:function(e){this.changeListeners_.push(e)}},{key:"notifyChange_",value:function(){this.changeListeners_.forEach((function(e){return e()}))}},{key:"setupUi",value:function(){var e=this;this.$topLabel=o()("<div>").addClass("canvas-label label-vertical").hide().appendTo("body"),this.$leftLabel=o()("<div>").addClass("canvas-label label-horizontal").hide().appendTo("body"),this.$rightLabel=o()("<div>").addClass("canvas-label label-horizontal").hide().appendTo("body"),this.$bottomLabel=o()("<div>").addClass("canvas-label label-vertical").hide().appendTo("body"),o()(".stage-which input").on("change",(function(t){e.editMode=o()(t.currentTarget).val(),o()(".trim-button").toggle("stretch"==e.editMode),o()(".find-region-button").text({stretch:"Auto-stretch",padding:"Auto-padding",opticalbounds:"Auto-bounds"}[e.editMode]),o()(".stage-which input").prop("checked",!1),o()(t.currentTarget).prop("checked",!0),e.redrawOverlay()})),o()(".stage-matte-color input").on("change",(function(t){e.matteColor=o()(t.currentTarget).val(),o()(document.body).attr("data-theme",e.matteColor),o()(".stage-matte-color input").prop("checked",!1),o()(t.currentTarget).prop("checked",!0),e.redrawImage()})),o()(".trim-edge-button").click((function(){return Yt(e)})),o()(".trim-stretch-button").click((function(){return Xt(e)})),o()(".find-region-button").click((function(){var t=Zt(e,e.editMode);t&&("stretch"==e.editMode?e.stretchRect=t:"opticalbounds"==e.editMode?e.opticalBoundsRect=t:"padding"==e.editMode&&(e.contentRect=t),e.saveRects(),e.redrawOverlay(),e.notifyChange_())}))}},{key:"setupDragging",value:function(){var e,t,r=this,n=function(){return{stretch:r.stretchRect,padding:r.contentRect,opticalbounds:r.opticalBoundsRect}[r.editMode]};this.$canvasContainer.on("mousedown",(function(n){r.dragging=!0,r.redrawOverlay(),o()(window).on("mouseup",e).on("mousemove",t)})).on("mousemove",(function(e){if(r.$imageCanvas&&!r.dragging){var t=n(),a=r.$canvasContainer.offset(),o=e.pageX-a.left,i=e.pageY-a.top;r.editLeft=r.editRight=r.editTop=r.editBottom=!1,o>=t.x*r.zoom-10&&o<=t.x*r.zoom+10?r.editLeft=!0:o>=(t.x+t.w)*r.zoom-10&&o<=(t.x+t.w)*r.zoom+10&&(r.editRight=!0),i>=t.y*r.zoom-10&&i<=t.y*r.zoom+10?r.editTop=!0:i>=(t.y+t.h)*r.zoom-10&&i<=(t.y+t.h)*r.zoom+10&&(r.editBottom=!0);var c="default";r.editLeft?c=r.editTop?"nw-resize":r.editBottom?"sw-resize":"w-resize":r.editRight?c=r.editTop?"ne-resize":r.editBottom?"se-resize":"e-resize":r.editTop?c="n-resize":r.editBottom&&(c="s-resize"),r.$canvasContainer.css("cursor",c)}})),e=function(n){r.dragging&&(r.dragging=!1,r.redrawOverlay(),r.saveRects()),o()(window).off("mousemove",t).off("mouseup",e)},t=function(e){e.preventDefault(),e.stopPropagation();var t=n(),a=r.$canvasContainer.offset(),o=e.pageX-a.left,i=e.pageY-a.top;if(r.editLeft){var c=Math.max(0,Math.min(t.x+t.w-1,Math.round(o/r.zoom)));t.w=t.w+t.x-c,t.x=c}if(r.editTop){var s=Math.max(0,Math.min(t.y+t.h-1,Math.round(i/r.zoom)));t.h=t.h+t.y-s,t.y=s}r.editRight&&(t.w=Math.min(r.srcSize.w-t.x,Math.max(1,Math.round(o/r.zoom)-t.x))),r.editBottom&&(t.h=Math.min(r.srcSize.h-t.y,Math.max(1,Math.round(i/r.zoom)-t.y))),r.redrawOverlay(),r.notifyChange_()}}},{key:"loadSourceImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.$canvasContainer.empty(),o()(".editor-button").attr("disabled",e?null:"disabled"),e){this.srcCtx=e;var r=!1,n={w:this.srcCtx.canvas.width,h:this.srcCtx.canvas.height};r=!this.srcSize||this.srcSize.w!=n.w||this.srcSize.h!=n.h,this.srcSize=n,r&&(this.stretchRect=t.stretchRect||{x:Math.floor(this.srcSize.w/3),y:Math.floor(this.srcSize.h/3),w:Math.ceil(this.srcSize.w/3),h:Math.ceil(this.srcSize.h/3)},this.contentRect=t.contentRect||{x:0,y:0,w:this.srcSize.w,h:this.srcSize.h},this.opticalBoundsRect=t.opticalBoundsRect||{x:0,y:0,w:this.srcSize.w,h:this.srcSize.h}),t.stretchRect||this.loadLastRects(),this.$imageCanvas=o()("<canvas>").attr({width:this.srcSize.w,height:this.srcSize.h}).appendTo(this.$canvasContainer),this.$overlayCanvas=o()("<canvas>").addClass("overlay").appendTo(this.$canvasContainer),this.relayout(),this.redrawImage(),this.redrawOverlay(),this.notifyChange_()}}},{key:"relayout",value:function(){if(this.$imageCanvas){var e=Math.floor(this.$stage.width()/this.srcSize.w),t=Math.floor(this.$stage.height()/this.srcSize.h);this.zoom=Math.max(1,Math.min(e,t)),this.zoomedSize={w:this.srcSize.w*this.zoom,h:this.srcSize.h*this.zoom},this.$imageCanvas.css({width:this.zoomedSize.w,height:this.zoomedSize.h}),this.$overlayCanvas.attr({width:this.zoomedSize.w,height:this.zoomedSize.h})}}},{key:"redrawImage",value:function(){if(this.$imageCanvas){var e=this.$imageCanvas.get(0).getContext("2d");e.fillStyle="light"==this.matteColor?"#eee":"#555",e.fillRect(0,0,this.srcSize.w,this.srcSize.h),e.drawImage(this.srcCtx.canvas,0,0)}}},{key:"redrawOverlay",value:function(){if(this.srcCtx){var e={stretch:this.stretchRect,padding:this.contentRect,opticalbounds:this.opticalBoundsRect}[this.editMode],t=this.$overlayCanvas.get(0).getContext("2d");if(t.clearRect(0,0,this.zoomedSize.w,this.zoomedSize.h),t.save(),e===this.stretchRect?(t.beginPath(),t.moveTo(0,e.y*this.zoom+.5),t.lineTo(this.zoomedSize.w,e.y*this.zoom+.5),t.moveTo(0,(e.y+e.h)*this.zoom-.5),t.lineTo(this.zoomedSize.w,(e.y+e.h)*this.zoom-.5),t.moveTo(e.x*this.zoom+.5,0),t.lineTo(e.x*this.zoom+.5,this.zoomedSize.h),t.moveTo((e.x+e.w)*this.zoom-.5,0),t.lineTo((e.x+e.w)*this.zoom-.5,this.zoomedSize.h)):(t.beginPath(),t.rect(e.x*this.zoom+.5,e.y*this.zoom+.5,e.w*this.zoom-1,e.h*this.zoom-1),t.closePath()),this.dragging?(t.strokeStyle="rgba(255, 255, 255, 1)",t.lineWidth=3,t.stroke(),t.strokeStyle="rgba(255, 23, 68, 1)",t.lineWidth=1,t.stroke()):(t.strokeStyle="rgba(255, 255, 255, .5)",t.lineWidth=3,t.stroke(),t.strokeStyle="rgba(0, 0, 0, .5)",t.setLineDash([3,3]),t.lineWidth=1,t.stroke()),t.restore(),this.dragging){var r=this.$canvasContainer.offset();this.$leftLabel.text(e.x).css({left:r.left,width:e.x*this.zoom,top:r.top+(e.y+e.h/2)*this.zoom}).show(),this.$rightLabel.text(this.srcSize.w-e.x-e.w).css({left:r.left+(e.x+e.w)*this.zoom,width:(this.srcSize.w-e.x-e.w)*this.zoom,top:r.top+(e.y+e.h/2)*this.zoom}).show(),this.$topLabel.text(e.y).css({top:r.top,height:e.y*this.zoom,left:r.left+(e.x+e.w/2)*this.zoom}).show(),this.$bottomLabel.text(this.srcSize.h-e.y-e.h).css({top:r.top+(e.y+e.h)*this.zoom,height:(this.srcSize.h-e.y-e.h)*this.zoom,left:r.left+(e.x+e.w/2)*this.zoom}).show()}else this.$topLabel.hide(),this.$leftLabel.hide(),this.$rightLabel.hide(),this.$bottomLabel.hide()}}},{key:"saveRects",value:function(){localStorage[this.localStorageKey]=JSON.stringify({stretchRect:this.stretchRect,contentRect:this.contentRect,opticalBoundsRect:this.opticalBoundsRect})}},{key:"loadLastRects",value:function(){try{var e=JSON.parse(localStorage[this.localStorageKey]);e.stretchRect&&e.contentRect&&e.opticalBoundsRect&&(this.stretchRect=nr(e.stretchRect,this.srcSize),this.contentRect=nr(e.contentRect,this.srcSize),this.opticalBoundsRect=nr(e.opticalBoundsRect,this.srcSize))}catch(e){}}},{key:"localStorageKey",get:function(){return"assetStudioNinePatchStage-".concat(this.name)}}])&&er(t.prototype,r),n&&er(t,n),e}();function nr(e,t){var r={};return r.x=Math.max(0,e.x),r.y=Math.max(0,e.y),r.w=Math.min(t.w-e.x,e.w),r.h=Math.min(t.h-e.y,e.h),r}function ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var or=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stage=t,this.size={w:200,h:200},this.setupUi(),this.redraw()}var t,r,n;return t=e,(r=[{key:"setupUi",value:function(){var e,t,r,n,a=this,i=function(o){a.size.w=Math.max(1,e+2*(o.pageX-r)),a.size.h=Math.max(1,t+2*(o.pageY-n)),a.redraw()},c=function e(t){o()(window).off("mousemove",i).off("mouseup",e)};o()(".preview-area").on("mousedown",(function(s){e=a.size.w,t=a.size.h,r=s.pageX,n=s.pageY,o()(window).on("mousemove",i).on("mouseup",c)})),o()("#preview-with-content").click((function(e){return o()(".text-preview").toggle(o()(e.currentTarget).is(":checked"))}))}},{key:"redraw",value:function(){var e=o()(".preview-area canvas").get(0);if(e.width=this.size.w,e.height=this.size.h,this.stage.srcCtx){var t=e.getContext("2d"),r={l:this.stage.stretchRect.x,t:this.stage.stretchRect.y,r:this.stage.srcSize.w-this.stage.stretchRect.x-this.stage.stretchRect.w,b:this.stage.srcSize.h-this.stage.stretchRect.y-this.stage.stretchRect.h};r.l&&r.t&&t.drawImage(this.stage.srcCtx.canvas,0,0,r.l,r.t,0,0,r.l,r.t),r.l&&r.b&&t.drawImage(this.stage.srcCtx.canvas,0,this.stage.srcSize.h-r.b,r.l,r.b,0,this.size.h-r.b,r.l,r.b),r.r&&r.t&&t.drawImage(this.stage.srcCtx.canvas,this.stage.srcSize.w-r.r,0,r.r,r.t,this.size.w-r.r,0,r.r,r.t),r.r&&r.b&&t.drawImage(this.stage.srcCtx.canvas,this.stage.srcSize.w-r.r,this.stage.srcSize.h-r.b,r.r,r.b,this.size.w-r.r,this.size.h-r.b,r.r,r.b),r.t&&t.drawImage(this.stage.srcCtx.canvas,r.l,0,this.stage.stretchRect.w,r.t,r.l,0,this.size.w-r.l-r.r,r.t),r.l&&t.drawImage(this.stage.srcCtx.canvas,0,r.t,r.l,this.stage.stretchRect.h,0,r.t,r.l,this.size.h-r.t-r.b),r.r&&t.drawImage(this.stage.srcCtx.canvas,this.stage.srcSize.w-r.r,r.t,r.r,this.stage.stretchRect.h,this.size.w-r.r,r.t,r.r,this.size.h-r.t-r.b),r.b&&t.drawImage(this.stage.srcCtx.canvas,r.l,this.stage.srcSize.h-r.b,this.stage.stretchRect.w,r.b,r.l,this.size.h-r.b,this.size.w-r.l-r.r,r.b),t.drawImage(this.stage.srcCtx.canvas,r.l,r.t,this.stage.stretchRect.w,this.stage.stretchRect.h,r.l,r.t,this.size.w-r.l-r.r,this.size.h-r.t-r.b),o()(".preview-area .text-preview").css({left:this.stage.contentRect.x+"px",top:this.stage.contentRect.y+"px",width:this.size.w-this.stage.srcSize.w+this.stage.contentRect.w+"px",height:this.size.h-this.stage.srcSize.h+this.stage.contentRect.h+"px"})}}}])&&ar(t.prototype,r),n&&ar(t,n),e}(),ir=function(e,t,r,n){return(e<<16)+(t<<8)+(r<<0)+(n<<24)},cr=ir(0,0,0,255),sr=ir(255,0,0,255),lr=function(e,t){var r,n={w:e.canvas.width,h:e.canvas.height},a=e.getImageData(0,0,n.w,n.h),o={w:n.w-2,h:n.h-2},i={contentRect:{x:0,y:0,w:o.w,h:o.h},stretchRect:{x:0,y:0,w:o.w,h:o.h},opticalBoundsRect:{x:0,y:0,w:o.w,h:o.h}};function c(e,t){return(a.data[4*(t*n.w+e)+0]<<16)+(a.data[4*(t*n.w+e)+1]<<8)+(a.data[4*(t*n.w+e)+2]<<0)+(a.data[4*(t*n.w+e)+3]<<24)}r=!1;for(var s=0;s<o.w;s++){var l=c(s+1,0);r||l!=cr?r&&l!=cr&&(i.stretchRect.w=s-i.stretchRect.x,r=!1):(i.stretchRect.x=s,r=!0)}r=!1;for(var u=0;u<o.h;u++){var f=c(0,u+1);r||f!=cr?r&&f!=cr&&(i.stretchRect.h=u-i.stretchRect.y,r=!1):(i.stretchRect.y=u,r=!0)}r=!1;for(var h=0;h<o.w;h++){var d=c(h+1,n.h-1);r||d!=cr?r&&d!=cr&&(i.contentRect.w=h-i.contentRect.x,r=!1):(i.contentRect.x=h,r=!0)}r=!1;for(var p=0;p<o.h;p++){var _=c(n.w-1,p+1);r||_!=cr?r&&_!=cr&&(i.contentRect.h=p-i.contentRect.y,r=!1):(i.contentRect.y=p,r=!0)}r=!1;for(var m=0;m<o.w;m++){var g=c(m+1,n.h-1);r||g==sr?r&&g==sr&&(i.opticalBoundsRect.w=m-i.opticalBoundsRect.x,r=!1):(i.opticalBoundsRect.x=m,r=!0)}for(var y=0;y<o.h;y++){var v=c(n.w-1,y+1);r||v==sr?r&&v==sr&&(i.opticalBoundsRect.h=y-i.opticalBoundsRect.y,r=!1):(i.opticalBoundsRect.y=y,r=!0)}var b=Le.a.context(o);b.drawImage(e.canvas,1,1,o.w,o.h,0,0,o.w,o.h),t.loadSourceImage(b,i)};function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(e,t,r){return(hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mr(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=mr(e);if(t){var a=mr(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _r(this,r)}}function _r(e,t){return!t||"object"!==ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gr=new Set(["xxxhdpi","xxhdpi","xhdpi","hdpi","mdpi"]),yr=[{id:"160",title:"mdpi<br><small>(160)</small>"},{id:"240",title:"hdpi<br><small>(240)</small>"},{id:"320",title:"xhdpi<br><small>(320)</small>"},{id:"480",title:"xxhdpi<br><small>(480)</small>"},{id:"640",title:"xxxhdpi<br><small>(640)</small>"}];document.location.search.indexOf("extradensities")>=0&&(gr.add("ldpi"),gr.add("tvdpi"));var vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(c,e);var t,r,n,a=pr(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).stage=new rr,e.preview=new or(e.stage),e.stage.onChange((function(){e.regenerate(),e.preview.redraw()})),e.setupOutputsPreviewTabs(),e}return t=c,(r=[{key:"setupOutputsPreviewTabs",value:function(){o()(".outputs-preview-tabs input").on("change",(function(e){o()(".outputs-preview-sidebar").attr("data-view",o()(e.currentTarget).val()),o()(".outputs-preview-tabs input").prop("checked",!1),o()(e.currentTarget).prop("checked",!0)}))}},{key:"setupForm",value:function(){var e,t=this;hr(mr(c.prototype),"setupForm",this).call(this),this.form=new oe({id:"ninepatchform",container:"#inputs-form",fields:[new De("source",{title:"Source graphic",imageOnly:!0,noTrimForm:!0,noPreview:!0,dropTarget:document.body}),new O("sourceDensity",{title:"Source density",buttons:!0,options:yr,defaultValue:"320"}),e=new me("name",{title:"Drawable name",helpText:"Used when generating ZIP files. Becomes <code>&lt;name&gt;.9.png</code>.",defaultValue:"example"})]}),this.form.onChange((function(r){var n=t.form.getValues();if(r&&"source"!=r.id_)t.regenerate();else if(n.source){if(!n.source.ctx)return;var a=n.source,o={w:a.ctx.canvas.width,h:a.ctx.canvas.height};if(t.stage.name="".concat(a.name,"-").concat(o.w,"x").concat(o.h),a.name&&a.name.match(/\.9\.png$/i)?lr(a.ctx,t.stage):t.stage.loadSourceImage(a.ctx),a.name){var c=i.sanitizeResourceName(a.name);c!=e.getValue()&&e.setValue(c)}}else t.stage.loadSourceImage(null)}))}},{key:"regenerate",value:function(){var e=this;if(this.stage.srcCtx){var t=this.form.getValues();t.name=t.name||"outline",this.zipper.clear(),this.zipper.setZipFilename("".concat(t.name,".9.zip")),this.densities.forEach((function(r){var n=i.getDpiForDensity(r)/t.sourceDensity,a={w:Math.ceil(e.stage.srcSize.w*n)+2,h:Math.ceil(e.stage.srcSize.h*n)+2},o=Le.a.context(a);Le.a.drawImageScaled(o,e.stage.srcCtx,0,0,e.stage.srcSize.w,e.stage.srcSize.h,1,1,a.w-2,a.h-2),br(o,[255,0,0,255],1,a.h-1,Math.floor(n*e.stage.opticalBoundsRect.x),1),br(o,[255,0,0,255],a.w-1,a.h-1,-Math.ceil(n*(e.stage.srcSize.w-e.stage.opticalBoundsRect.x-e.stage.opticalBoundsRect.w)),1),br(o,[255,0,0,255],a.w-1,1,1,Math.floor(n*e.stage.opticalBoundsRect.y)),br(o,[255,0,0,255],a.w-1,a.h-1,1,-Math.ceil(n*(e.stage.srcSize.h-e.stage.opticalBoundsRect.y-e.stage.opticalBoundsRect.h))),br(o,[0,0,0,255],1+Math.floor(n*e.stage.stretchRect.x),0,Math.ceil(n*e.stage.stretchRect.w),1),br(o,[0,0,0,255],0,1+Math.floor(n*e.stage.stretchRect.y),1,Math.ceil(n*e.stage.stretchRect.h)),br(o,[0,0,0,255],1+Math.floor(n*e.stage.contentRect.x),a.h-1,Math.ceil(n*e.stage.contentRect.w),1),br(o,[0,0,0,255],a.w-1,1+Math.floor(n*e.stage.contentRect.y),1,Math.ceil(n*e.stage.contentRect.h)),console.log(r,o.getImageData(a.w-1,Math.floor(a.h/2),1,1).data.toString()),e.zipper.add({name:"res/drawable-".concat(r,"/").concat(t.name,".9.png"),canvas:o.canvas}),e.setImageForSlot_(r,o.canvas.toDataURL("image/png",1))}))}}},{key:"densities",get:function(){return gr}}])&&fr(t.prototype,r),n&&fr(t,n),c}($e);function br(e,t,r,n,a,o){if(0!=a&&0!=o){a<0&&(r+=a,a=-a),o<0&&(n+=o,o=-o);for(var i=e.createImageData(a,o),c=0;c<a*o;c++)i.data[4*c]=t[0],i.data[4*c+1]=t[1],i.data[4*c+2]=t[2],i.data[4*c+3]=t[3];e.putImageData(i,r,n)}}r(301),window.pages=n,window.addEventListener("load",(function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js")}))}});